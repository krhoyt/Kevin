<!doctype html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="description" content="The intersection of development and design." />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <title>Getting Comfortable with Circles</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="Kevin Hoyt" href="/feed.xml" />  

  <link rel="stylesheet" href="/style/kevinhoyt.css" />
  <link rel="stylesheet" href="/style/header.css" />
  <link rel="stylesheet" href="/style/article.css" />
  <link rel="stylesheet" href="/style/footer.css" />
  <link rel="stylesheet" href="/style/prism.css" />  

</head>
<body>
  
  <header >
  <div>
    <p>Kevin Hoyt</p>
    <a href="https://bsky.app/profile/krhoyt.bsky.social" target="_blank">
      <img src="/img/bluesky.svg" width="16" height="16" />
    </a>
    <a href="https://github.com/krhoyt" target="_blank">
      <img src="/img/github.svg" width="16" height="16" />
    </a>      
    <a href="https://www.youtube.com/channel/UCSFeFhtLBuzU2UMs7oOL54A" target="_blank">
      <img src="/img/youtube.svg" width="20" height="20" style="margin-top: -1px;" />
    </a>          
    <a href="https://www.instagram.com/parkerkrhoyt" target="_blank">
      <img src="/img/instagram.svg" width="16" height="16" />
    </a>      
  </div>
  <div>
    <h2>Kevin Hoyt</h2>
    <h3>The intersection of development and design.</h3>
  </div>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/about">About</a></li>
    <li><a href="/events">Events</a></li>
    <li><a href="/lounge">Lounge</a></li>
  </ul>
</header>


  
  <main>

    <div>
      <img src="/img/covers/circles.jpg" alt="Getting Comfortable with Circles">

      
        <figcaption>
          <p>Photo by <a href="https://unsplash.com/@lceusebio">Luís Eusébio</a> on <a href="https://unsplash.com/photos/man-stainding-on-black-concrete-floor-casting-shadow-5SUt9q8jQrQ">Unsplash</a></p>
        </figcaption>
      
    </div>

    <article>
      <h1>Getting Comfortable with Circles</h1>
      <time>Jul 15, 2025 &bull; 28 min read</time>
      <p>When is the last time you installed a module or library because you thought the task was too hard (or time consuming) to tackle yourself? On the front end, this scenario can quickly lead to a resulting application that is considerably larger than it needs to be. You might be surprised to discover that some of the tasks that you might think of as hard, such as charts, animation, and date handling, can actually be pretty straightforward - and have a big impact on the size and performance of your application.</p>
<blockquote>
<p>This post is the first in a series that delves into some of those areas that cause most developers to reach for a third-party library.</p>
</blockquote>
<p>Take for example the humble circle. Sure, you took trigonometry at some point in the past, but who remembers the implications of all those sine, cosine, tangent, and hypotenuse calculations? I mean, where in my brain am I going to put the Marvel Cinematic Universe story arcs if I do not make some space up there? And then along comes a radar chart.</p>
<p><img src="/img/assets/radar.jpg" alt="Radar chart"></p>
<p>Over the course of the rest of this post, we will tackle building this radar chart from scratch. Along the way you will pick up a handful of lines of math that make it all possible; opening the door to building your own custom charts that are light-weight and blazing fast.</p>
<h2>Radar Chart Deconstructed</h2>
<p>Before we jump into the code, let us take a moment to look at the radar chart above. Calm down. Center yourself. What are the parts that make up the chart? There are clearly some labels around the outside of the chart. The chart itself is a circle, which means a specific radius. This chart has nested circles. There are five circles in total, and five labels (though the number of circles and labels are unrelated). It also looks like there are two datasets being plotted, each with a different color.</p>
<p>That is where we will start.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">COLORS</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'#1f78b4'</span><span class="token punctuation">,</span> <span class="token string">'#46a040'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">LABELS</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'Power tools'</span><span class="token punctuation">,</span> 
  <span class="token string">'Electrical supplies'</span><span class="token punctuation">,</span> 
  <span class="token string">'Plumbing items'</span><span class="token punctuation">,</span> 
  <span class="token string">'Garden tools'</span><span class="token punctuation">,</span> 
  <span class="token string">'Plants'</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">LEVELS</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>    
<span class="token keyword">const</span> <span class="token constant">RADIUS</span> <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">STEPS</span> <span class="token operator">=</span> <span class="token constant">RADIUS</span> <span class="token operator">/</span> <span class="token constant">LEVELS</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">SVGNS</span> <span class="token operator">=</span> <span class="token string">'http://www.w3.org/2000/svg'</span><span class="token punctuation">;</span>    

<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">900</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">,</span> <span class="token number">900</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">650</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Find maximum value</span>
<span class="token keyword">let</span> maximum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> d <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> d<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> v<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    maximum <span class="token operator">=</span> data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">></span> maximum <span class="token operator">?</span> data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">:</span> maximum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// SVG elements</span>
<span class="token keyword">const</span> svg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span> <span class="token string">'svg'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chart <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span> <span class="token string">'g'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>I have manually extrapolated the data represented in the chart - an <code>Array</code> with one <code>Array</code> each for the data being plotted. Each of those <code>Array</code> have five data points. There are five elements in the <code>Array</code> because there are five labels, not because there are five circles. I have also found the maximum value in the dataset. Sometimes you may also need to find the minimum, but it is clear from the picture that zero is the minimum in this case.</p>
<p>You might have also noticed the <code>SVGNS</code> variable with a URL as the value. We will be using SVG to render our chart, and some SVG DOM operations require the SVG namespace, so this variable is there simply for brevity.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre>
<p>The SVG element gets a default size in the DOM, and we will be playing with that a little later. For now, I set a <code>width</code> and <code>height</code> of <code>300</code> just to give us some space while we are working. The <code>g</code> or &quot;group&quot; element is what will hold all the elements we generate to create our chart. The group element is your friend when working with SVG. It opens the door for more targetted transformations, which again, we will get to later. While we are here, the last two lines of the JavaScript code snippet above, grabs references to each of the two main SVG element from the DOM. We will use these both pretty extensively moving forward.</p>
<h2>Circles Everywhere</h2>
<p>Now that we have a good description of our radar chart, let us get to the drawing. We will start with those five nested circles.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Circles</span>
<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> c <span class="token operator">&lt;=</span> <span class="token constant">LEVELS</span><span class="token punctuation">;</span> c<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> circle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span> <span class="token constant">SVGNS</span><span class="token punctuation">,</span> <span class="token string">'circle'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  circle<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> steps <span class="token operator">*</span> c <span class="token punctuation">)</span><span class="token punctuation">;</span>
  chart<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> circle <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>The <code>for</code> loop here is setup to start at one, and then iterate five times (<code>LEVELS === 5</code>). Why not set the iterator to zero, and then go until <code>c &lt; LEVELS</code> like most loops? That would give us five circles, but the first circle would have a radius of zero. The result would appear to be only four circles. We want five circles, with the zero radius circle at the center implied. That means we need to shift our loop by one.</p>
<p>You will notice that we are not worrying about the positioning of the circles. We create the circles and put them into the DOM. The default center will be zero on both the X and Y axes. This is the top-left corner of the SVG element, and makes the math easier moving forward.</p>
<h2>The View Box</h2>
<p>If you run this code now, you will see only the bottom-right quadrant of the circles. We could calculate the center position, and set the coordinates of the circles, but SVG offers us a way to independantly control what part of the SVG content is visible. This parameter is called <code>viewBox</code> and is set on the SVG element itself.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-150 -150 300 300<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre>
<p>The outside circle has a radius of 150 pixels. That is a diameter of 300 pixels. If the center of the circle is at <code>0, 0</code> then 150 pixels of that circle are off the view of the SVG element, effectively placing the left-most pixel at -150 pixels. We can tell the SVG element about this with <code>viewBox</code>. The <code>viewBox</code> attribute takes four arguments - the left, top, width, and height of the viewport we would like to designate. By telling the <code>viewBox</code> that the left and top are -150, and that there is a width and height of 300, then we will see the full set of circles, not just the bottom-right quadrant.</p>
<blockquote>
<p>In advanced manipulations of <code>viewBox</code> you may need to calculate ratios of the content to be displayed relative to the dimensions of the SVG element itself. This is beyond the scope of this tutorial, but I will pick it up in a future post.</p>
</blockquote>
<h2>Radians and Degrees</h2>
<p>The five spokes on the radar chart are set at an equal number of degrees apart. There are fives spokes (one for each label). Each spoke starts at 0, 0 and goes to a point on the outer circle some number of degrees separated from the previous spoke. We need to know what the X and Y coordinates are for those points. Okay, here comes the circle math.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Radians</span>
<span class="token keyword">function</span> <span class="token function">degreesToRadians</span><span class="token punctuation">(</span> <span class="token parameter">degrees</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> degrees <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Degrees make sense to you and I. For example, we can think of 360 degrees in a circle. The trigonometric functions we will work with do not want degrees as an argument, they want radians. Why radians? What exactly is a radian? In drawing circles and lines, we do not really care. Sure, there is a perfectly reasonable maths explaination, but we do not care. All we care about is that we convert our degrees to the radian unit desired when working with these functions.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Spokes</span>
<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> s <span class="token operator">&lt;</span> <span class="token constant">LABELS</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> s<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> angle <span class="token operator">=</span> <span class="token function">degreesToRadians</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token number">360</span> <span class="token operator">/</span> <span class="token constant">LABELS</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token operator">*</span> s <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">90</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token constant">RADIUS</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span> angle <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token constant">RADIUS</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span> angle <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> path <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span> <span class="token constant">SVGNS</span><span class="token punctuation">,</span> <span class="token string">'path'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  path<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token string">'spoke'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  path<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">M 0 0 L </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  chart<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> path <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Now for each of the labels we will draw a &quot;spoke&quot;. The angle of that spoke is based on the index of the iteration. To get the X-coordinate we use <code>Math.cos( angle )</code> of the angle we are interested in getting. We multiply by the <code>RADIUS</code> of the outer circle to project out along that angle to the point where the line will intercept the circle. To get the Y-coordinate we do the same thing, but use <code>Math.sin( angle )</code>.</p>
<p>That is it. That is all the circle math you need to know - use radians, <code>Math.cos()</code> is the X-coordinate, and <code>Math.sin()</code> is the Y-coordinate. If you have those three rules in your head, you can have all kinds of fun with circle math.</p>
<p>In SVG, a spoke will be represented as a <code>path</code> element. The <code>path</code> element takes a series of numbers and letters that indicate a description (<code>d</code> attribute) of what is to be drawn. You can go down a rabbit hole with this, but we will stick to <code>M</code> for &quot;move to&quot; and <code>L</code> for &quot;line to&quot;. Each value is followed by an X and Y-coordinate respectively. To draw a spoke, we describe the line as &quot;move to 0, 0 and then draw a line to X and Y&quot; and determined by the circle math we just performed.</p>
<h2>Plotting the Data</h2>
<p>To plot the data, we use the exact same rules as the spokes - radians, <code>Math.cos()</code>, and <code>Math.sin()</code>. Indeed the iteration of the dataset starts off with pretty much the same code as from the spokes. The only subtle difference is that we are not going to multiply by <code>RADIUS</code> because that would always be 150 pixels. We want the plot of the data to reflect the values in the dataset.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Map range</span>
<span class="token keyword">function</span> <span class="token function">map</span><span class="token punctuation">(</span> <span class="token parameter">value<span class="token punctuation">,</span> in_min<span class="token punctuation">,</span> in_max<span class="token punctuation">,</span> out_min<span class="token punctuation">,</span> out_max</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ratio <span class="token operator">=</span> <span class="token punctuation">(</span> value <span class="token operator">-</span> in_min <span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span> in_max <span class="token operator">-</span> in_min <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> out_min <span class="token operator">+</span> <span class="token punctuation">(</span> ratio <span class="token operator">*</span> <span class="token punctuation">(</span> out_max <span class="token operator">-</span> out_min <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>      
<span class="token punctuation">}</span>   </code></pre>
<p>Earlier, when we setup the description of the radar chart, we determined the maximum value in the dataset. In this case, that is 900. The radius of the circle is only 150 pixels. Drawing a plot line at 900 pixels would not even show up on our 300x300 SVG element. We need to map the dataset value relative to the radius of the circle. The map function here takes a value, the range in which that value falls, and target range to which we want to relate. In this case, 900 becomes 150. A value of 450 would become 75, and so on.</p>
<blockquote>
<p>I actually picked up this algorithm when working with microcontrollers.</p>
</blockquote>
<pre class="language-js"><code class="language-js"><span class="token comment">// Data </span>
<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> d <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> d<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> plot <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> v<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> angle <span class="token operator">=</span> <span class="token function">degreesToRadians</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token number">360</span> <span class="token operator">/</span> <span class="token constant">LABELS</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token operator">*</span> v <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">90</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> radius <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span> data<span class="token punctuation">[</span>d<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> maximum<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">RADIUS</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> x <span class="token operator">=</span> radius <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span> angle <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> y <span class="token operator">=</span> radius <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span> angle <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span> v <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      plot <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">M </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      plot <span class="token operator">=</span> plot <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">L </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  plot <span class="token operator">=</span> plot <span class="token operator">+</span> <span class="token string">'Z'</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> path <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span> <span class="token constant">SVGNS</span><span class="token punctuation">,</span> <span class="token string">'path'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  path<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token string">'plot'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  path<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'stroke'</span><span class="token punctuation">,</span> <span class="token constant">COLORS</span><span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  path<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token constant">COLORS</span><span class="token punctuation">[</span>d<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'40'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>      
  path<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">,</span> plot <span class="token punctuation">)</span><span class="token punctuation">;</span>
  chart<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> path <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>On the first iteration of each of the two datasets, we do not want to move to 0, 0 before drawing. We want to move to the first coordinate of the relative/mapped value. We only want that move to happen on the first iteration (index of zero). After that we want to draw a line to the relative/mapped coordinate. When we have finished a set of iterations for a dataset, we want to close the plot. We could calculate this and draw another line, but SVG gives us the <code>Z</code> command which tells the path to close itself.</p>
<p>We set the <code>stroke</code> and <code>fill</code> of the <code>path</code> representing the dataset on the element directly as the colors change. For the <code>fill</code> specifically, I take the six-digit hexadecimal value, and append <code>40</code> to it, representing an alpha channel value (opacity).</p>
<h2>Label the Values</h2>
<p>We are in the home stretch now! The radar chart example that we are referencing, displays values on the vertical axis. You might be inclined to reach for our three rules again - radians, <code>Math.cos()</code>, and <code>Math.sin()</code> - but we already know the X-coordinate is zero (plus some pixels for spacing). All we need is the Y-coordinate where each of the circles intersects the vertical axis line, and the relative value that represents within the dataset.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Values</span>
<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> <span class="token punctuation">(</span> <span class="token constant">LEVELS</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> v<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">(</span> maximum <span class="token operator">/</span> <span class="token constant">LEVELS</span> <span class="token punctuation">)</span> <span class="token operator">*</span> v<span class="token punctuation">;</span>
  <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token constant">RADIUS</span> <span class="token operator">/</span> <span class="token constant">LEVELS</span> <span class="token punctuation">)</span> <span class="token operator">*</span> v <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span> <span class="token constant">SVGNS</span><span class="token punctuation">,</span> <span class="token string">'text'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token string">'value'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
  chart<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> text <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>We use the SVG <code>text</code> element to display the values. Note that the <code>textContent</code> property is where we assign the text to be displayed (not <code>innerText</code>).</p>
<h2>Label the Labels</h2>
<p>Now for those labels along the outside of the chart itself. Here we will use our three rules again - radians, <code>Math.cos()</code>, and <code>Math.sin()</code>.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Labels</span>
<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> <span class="token constant">LABELS</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> v<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> angle <span class="token operator">=</span> <span class="token function">degreesToRadians</span><span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token number">360</span> <span class="token operator">/</span> <span class="token constant">LABELS</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token operator">*</span> v <span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">90</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> radius <span class="token operator">=</span> v <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token constant">RADIUS</span> <span class="token operator">+</span> <span class="token number">16</span> <span class="token operator">:</span> <span class="token constant">RADIUS</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> x <span class="token operator">=</span> radius <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span> angle <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> y <span class="token operator">=</span> radius <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span> angle <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> align <span class="token operator">=</span> <span class="token function">placement</span><span class="token punctuation">(</span> v<span class="token punctuation">,</span> <span class="token constant">LABELS</span><span class="token punctuation">.</span>length <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span> <span class="token constant">SVGNS</span><span class="token punctuation">,</span> <span class="token string">'text'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token string">'label'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>      
  text<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token constant">LABELS</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'dominant-baseline'</span><span class="token punctuation">,</span> align<span class="token punctuation">.</span>baseline <span class="token punctuation">)</span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'text-anchor'</span><span class="token punctuation">,</span> align<span class="token punctuation">.</span>anchor <span class="token punctuation">)</span><span class="token punctuation">;</span>            
  text<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> x <span class="token punctuation">)</span><span class="token punctuation">;</span>
  text<span class="token punctuation">.</span><span class="token function">setAttributeNS</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> y <span class="token punctuation">)</span><span class="token punctuation">;</span>
  chart<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span> text <span class="token punctuation">)</span><span class="token punctuation">;</span>      
<span class="token punctuation">}</span></code></pre>
<blockquote>
<p>The <code>16</code> and <code>8</code> might seem like &quot;magic numbers&quot;. These numbers are manually adjusted to keep the labels from bumping right up against the outer circle. Custom visual spacing tweak for the win!</p>
</blockquote>
<p>The <code>text</code> element will render the content using the top-left corner by default. That is to say that if the placement coordinates are 160, 130, that is where the top-left corner of the text content will be located. The result is that the content will render out across the chart contents itself. Fortunately, you can tell <code>text</code> what to use as an origin with the <code>dominant-baseline</code> and <code>text-anchor</code> properties (representing vertical and horizontal respectively).</p>
<p>As an example, for the first value, the label at the top of the chart, we want an origin of bottom-center. At 90 degrees along, we want an origin of center-left. When we get to the other side of the circle, say at 270 degrees, we want an origin of center-right. I have not found a clean, mathematical way to calculate this placement, so I use the degrees of the placement in an <code>if</code> statement.</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// Label placement</span>
<span class="token keyword">function</span> <span class="token function">placement</span><span class="token punctuation">(</span> <span class="token parameter">index<span class="token punctuation">,</span> count</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> degrees <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">360</span> <span class="token operator">/</span> count <span class="token punctuation">)</span> <span class="token operator">*</span> index<span class="token punctuation">;</span>

 <span class="token keyword">let</span> anchor <span class="token operator">=</span> <span class="token string">'middle'</span>
 <span class="token keyword">let</span> baseline <span class="token operator">=</span> <span class="token string">'auto'</span><span class="token punctuation">;</span>

 <span class="token keyword">if</span><span class="token punctuation">(</span> degrees <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'auto'</span><span class="token punctuation">;</span>        
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> degrees <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> degrees <span class="token operator">&lt;</span> <span class="token number">90</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'start'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'auto'</span><span class="token punctuation">;</span>   
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> degrees <span class="token operator">===</span> <span class="token number">90</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'start'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>        
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> degrees <span class="token operator">></span> <span class="token number">90</span> <span class="token operator">&amp;&amp;</span> degrees <span class="token operator">&lt;</span> <span class="token number">180</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'start'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'hanging'</span><span class="token punctuation">;</span>        
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> degrees <span class="token operator">===</span> <span class="token number">180</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'hanging'</span><span class="token punctuation">;</span>                
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> degrees <span class="token operator">></span> <span class="token number">180</span> <span class="token operator">&amp;&amp;</span> degrees <span class="token operator">&lt;</span> <span class="token number">270</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'end'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'hanging'</span><span class="token punctuation">;</span>                        
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> degrees <span class="token operator">===</span> <span class="token number">270</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'end'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'middle'</span><span class="token punctuation">;</span>                        
 <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
   anchor <span class="token operator">=</span> <span class="token string">'end'</span><span class="token punctuation">;</span>
   baseline <span class="token operator">=</span> <span class="token string">'auto'</span><span class="token punctuation">;</span>                                
 <span class="token punctuation">}</span>

 <span class="token keyword">return</span> <span class="token punctuation">{</span>baseline<span class="token punctuation">,</span> anchor<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre>
<p>This <code>placement</code> function is like the <code>map</code> function in that it does not really change. It is a utility you can put aside and reference over and over again whenever you are build circle charts. If you have found a better approach, I would love to hear from you.</p>
<h2>One More Thing</h2>
<p>All the hard parts of constructing and rendering our chart are complete. Unfortunately, some of the labels along the outside of the chart, especially the long one on the right, are being truncated by our SVG element dimensions. What we really want now is to take into consideration not just <code>RADIUS</code>, which is where we got our <code>viewBox</code> from initially, but also the new dimensions of the entire chart to include the labels; however long they may be. With those dimensions, we then want to adjust the <code>viewBox</code> to display all the content.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> bounds <span class="token operator">=</span> chart<span class="token punctuation">.</span><span class="token function">getBBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
svg<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span> 
  <span class="token string">'viewBox'</span><span class="token punctuation">,</span> 
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bounds<span class="token punctuation">.</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bounds<span class="token punctuation">.</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bounds<span class="token punctuation">.</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bounds<span class="token punctuation">.</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>You might be familiar with <code>getBoundingClientRect()</code>. We could use that here as well, but SVG elements actually give us <code>getBBox()</code> which returns values designed to placed in the <code>viewBox</code>. We make a call to <code>getBBox()</code> on the <code>chart</code>, and then set the <code>viewBox</code> accordingly. Now the entire chart, including the labels, will be displayed in the viewport of the SVG element. This holds true even if you resize the SVG element - for example, if you had a <code>grid</code> or <code>flex</code> display.</p>
<h2>Next Steps</h2>
<p>Whew! That seems like a lot, right? I mean, at this point you might be thinking &quot;I will just use the library, thanks.&quot; And I get it. It is a lot... Of learning. The actual code is not even 200 lines of JavaScript. It is blazing fast, and because you wrote it, and understand the core principles, you can customize it to your heart's content. When a VP decides that they want a change on how things are displayed, you do not have to check and see if your library supports that customization. Now you can make the change directly yourself.</p>
<p>From here you might consider wrapping this up in a Web Component, and exposing some basic customization through CSS properties. Happy charting!</p>

      <time>Published on Jul 15, 2025</time>
    </article>
  </main>
          

  <footer>
  <p>
    <a href="https://kevinhoyt.com">Kevin Hoyt</a>
    <span>&copy; 2025 - Published with</span>
    <a href="https://www.11ty.dev">Eleventy</a>
  </p>
</footer>


</body>
</html>
