(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();let lt;const Br=new Uint8Array(16);function Fr(){if(!lt&&(lt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lt(Br)}const $=[];for(let t=0;t<256;++t)$.push((t+256).toString(16).slice(1));function Lr(t,e=0){return($[t[e+0]]+$[t[e+1]]+$[t[e+2]]+$[t[e+3]]+"-"+$[t[e+4]]+$[t[e+5]]+"-"+$[t[e+6]]+$[t[e+7]]+"-"+$[t[e+8]]+$[t[e+9]]+"-"+$[t[e+10]]+$[t[e+11]]+$[t[e+12]]+$[t[e+13]]+$[t[e+14]]+$[t[e+15]]).toLowerCase()}const Wr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kn={randomUUID:Wr};function Ur(t,e,n){if(Kn.randomUUID&&!e&&!t)return Kn.randomUUID();t=t||{};const r=t.random||(t.rng||Fr)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Lr(r)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O=function(){return O=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O.apply(this,arguments)};function qt(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var F=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U=Object.keys,j=Array.isArray;typeof Promise<"u"&&!F.Promise&&(F.Promise=Promise);function V(t,e){return typeof e!="object"||U(e).forEach(function(n){t[n]=e[n]}),t}var Qe=Object.getPrototypeOf,Nr={}.hasOwnProperty;function G(t,e){return Nr.call(t,e)}function Be(t,e){typeof e=="function"&&(e=e(Qe(t))),(typeof Reflect>"u"?U:Reflect.ownKeys)(e).forEach(function(n){fe(t,n,e[n])})}var er=Object.defineProperty;function fe(t,e,n,r){er(t,e,V(n&&G(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Fe(t){return{from:function(e){return t.prototype=Object.create(e.prototype),fe(t.prototype,"constructor",t),{extend:Be.bind(null,t.prototype)}}}}var Yr=Object.getOwnPropertyDescriptor;function gn(t,e){var n=Yr(t,e),r;return n||(r=Qe(t))&&gn(r,e)}var $r=[].slice;function It(t,e,n){return $r.call(t,e,n)}function tr(t,e){return e(t)}function ze(t){if(!t)throw new Error("Assertion Failed")}function nr(t){F.setImmediate?setImmediate(t):setTimeout(t,0)}function rr(t,e){return t.reduce(function(n,r,i){var a=e(r,i);return a&&(n[a[0]]=a[1]),n},{})}function zr(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function ce(t,e){if(G(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var a=ce(t,e[r]);n.push(a)}return n}var o=e.indexOf(".");if(o!==-1){var u=t[e.substr(0,o)];return u===void 0?void 0:ce(u,e.substr(o+1))}}function ee(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){ze(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)ee(t,e[r],n[r])}else{var a=e.indexOf(".");if(a!==-1){var o=e.substr(0,a),u=e.substr(a+1);if(u==="")n===void 0?j(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var s=t[o];(!s||!G(t,o))&&(s=t[o]={}),ee(s,u,n)}}else n===void 0?j(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Hr(t,e){typeof e=="string"?ee(t,e,void 0):"length"in e&&[].map.call(e,function(n){ee(t,n,void 0)})}function ir(t){var e={};for(var n in t)G(t,n)&&(e[n]=t[n]);return e}var jr=[].concat;function ar(t){return jr.apply([],t)}var or="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ar([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return F[t]}),qr=or.map(function(t){return F[t]});rr(or,function(t){return[t,!0]});var ye=null;function nt(t){ye=typeof WeakMap<"u"&&new WeakMap;var e=Vt(t);return ye=null,e}function Vt(t){if(!t||typeof t!="object")return t;var e=ye&&ye.get(t);if(e)return e;if(j(t)){e=[],ye&&ye.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Vt(t[n]))}else if(qr.indexOf(t.constructor)>=0)e=t;else{var i=Qe(t);e=i===Object.prototype?{}:Object.create(i),ye&&ye.set(t,e);for(var a in t)G(t,a)&&(e[a]=Vt(t[a]))}return e}var Vr={}.toString;function Qt(t){return Vr.call(t).slice(8,-1)}var Xt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Qr=typeof Xt=="symbol"?function(t){var e;return t!=null&&(e=t[Xt])&&e.apply(t)}:function(){return null},Ie={};function se(t){var e,n,r,i;if(arguments.length===1){if(j(t))return t.slice();if(this===Ie&&typeof t=="string")return[t];if(i=Qr(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var bn=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ie=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ur(t,e){ie=t,sr=e}var sr=function(){return!0},Xr=!new Error("").stack;function Me(){if(Xr)try{throw Me.arguments,new Error}catch(t){return t}return new Error}function Gt(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(sr).map(function(r){return`
`+r}).join("")):""}var Gr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],lr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],wn=Gr.concat(lr),Jr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Le(t,e){this._e=Me(),this.name=t,this.message=e}Fe(Le).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Gt(this._e,2))}},toString:function(){return this.name+": "+this.message}});function cr(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Tt(t,e,n,r){this._e=Me(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=cr(t,e)}Fe(Tt).from(Le);function je(t,e){this._e=Me(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=cr(t,e)}Fe(je).from(Le);var _n=wn.reduce(function(t,e){return t[e]=e+"Error",t},{}),Zr=Le,D=wn.reduce(function(t,e){var n=e+"Error";function r(i,a){this._e=Me(),this.name=n,i?typeof i=="string"?(this.message=""+i+(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message=i.name+" "+i.message,this.inner=i):(this.message=Jr[e]||n,this.inner=null)}return Fe(r).from(Zr),t[e]=r,t},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Bn=lr.reduce(function(t,e){return t[e+"Error"]=D[e],t},{});function ei(t,e){if(!t||t instanceof Le||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Bn[t.name])return t;var n=new Bn[t.name](e||t.message,t);return"stack"in t&&fe(n,"stack",{get:function(){return this.inner.stack}}),n}var Kt=wn.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=D[e]),t},{});Kt.ModifyError=Tt;Kt.DexieError=Le;Kt.BulkError=je;function B(){}function rt(t){return t}function ti(t,e){return t==null||t===rt?e:function(n){return e(t(n))}}function Ae(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ni(t,e){return t===B?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ae(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ae(i,this.onerror):i),a!==void 0?a:n}}function ri(t,e){return t===B?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ae(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ae(r,this.onerror):r)}}function ii(t,e){return t===B?e:function(n){var r=t.apply(this,arguments);V(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ae(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Ae(a,this.onerror):a),r===void 0?o===void 0?void 0:o:V(r,o)}}function ai(t,e){return t===B?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function xn(t,e){return t===B?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return e.apply(r,a)})}return e.apply(this,arguments)}}var Xe={},oi=100,ui=20,fr=100,Tn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Qe(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Qe(e),t]}(),Jt=Tn[0],Et=Tn[1],Zt=Tn[2],dr=Et&&Et.then,pt=Jt&&Jt.constructor,En=!!Zt,en=!1,si=Zt?function(){Zt.then(ct)}:F.setImmediate?setImmediate.bind(null,ct):F.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){ct(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(ct,0)},Ge=function(t,e){He.push([t,e]),Ct&&(si(),Ct=!1)},tn=!0,Ct=!0,Ce=[],mt=[],nn=null,rn=rt,Ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Wn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{Wn(t[0],t[1])}catch{}})}},A=Ke,He=[],Se=0,yt=[];function E(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=B,this._lib=!1;var e=this._PSD=A;if(ie&&(this._stackHolder=Me(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Xe)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&on(this,this._value);return}this._state=null,this._value=null,++e.ref,vr(this,t)}var an={get:function(){var t=A,e=St;function n(r,i){var a=this,o=!t.global&&(t!==A||e!==St),u=o&&!de(),s=new E(function(l,f){Cn(a,new hr(kt(r,t,o,u),kt(i,t,o,u),l,f,t))});return ie&&yr(s,this),s}return n.prototype=Xe,n},set:function(t){fe(this,"then",t&&t.prototype===Xe?an:{get:function(){return t},set:an.set})}};Be(E.prototype,{then:an,_then:function(t,e){Cn(this,new hr(null,null,t,e,A))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):gt(r)}):this.then(null,function(r){return r&&r.name===e?n(r):gt(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),gt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{en=!0;var t=mr(this,[],ui),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{en=!1}}},timeout:function(t,e){var n=this;return t<1/0?new E(function(r,i){var a=setTimeout(function(){return i(new D.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&fe(E.prototype,Symbol.toStringTag,"Dexie.Promise");Ke.env=gr();function hr(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}Be(E,{all:function(){var t=se.apply(null,arguments).map(At);return new E(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(i,a){return E.resolve(i).then(function(o){t[a]=o,--r||e(t)},n)})})},resolve:function(t){if(t instanceof E)return t;if(t&&typeof t.then=="function")return new E(function(n,r){t.then(n,r)});var e=new E(Xe,!0,t);return yr(e,nn),e},reject:gt,race:function(){var t=se.apply(null,arguments).map(At);return new E(function(e,n){t.map(function(r){return E.resolve(r).then(e,n)})})},PSD:{get:function(){return A},set:function(t){return A=t}},totalEchoes:{get:function(){return St}},newPSD:be,usePSD:Ue,scheduler:{get:function(){return Ge},set:function(t){Ge=t}},rejectionMapper:{get:function(){return rn},set:function(t){rn=t}},follow:function(t,e){return new E(function(n,r){return be(function(i,a){var o=A;o.unhandleds=[],o.onunhandled=a,o.finalize=Ae(function(){var u=this;ci(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),t()},e,n,r)})}});pt&&(pt.allSettled&&fe(E,"allSettled",function(){var t=se.apply(null,arguments).map(At);return new E(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(i,a){return E.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||e(r)})})})}),pt.any&&typeof AggregateError<"u"&&fe(E,"any",function(){var t=se.apply(null,arguments).map(At);return new E(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,i=new Array(r);t.forEach(function(a,o){return E.resolve(a).then(function(u){return e(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function vr(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&it();n&&typeof n.then=="function"?vr(t,function(i,a){n instanceof E?n._then(i,a):n.then(i,a)}):(t._state=!0,t._value=n,pr(t)),r&&at()}},on.bind(null,t))}catch(n){on(t,n)}}function on(t,e){if(mt.push(e),t._state===null){var n=t._lib&&it();e=rn(e),t._state=!1,t._value=e,ie&&e!==null&&typeof e=="object"&&!e._promise&&zr(function(){var r=gn(e,"stack");e._promise=t,fe(e,"stack",{get:function(){return en?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),fi(t),pr(t),n&&at()}}function pr(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Cn(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Se===0&&(++Se,Ge(function(){--Se===0&&Sn()},[]))}function Cn(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Se,Ge(li,[n,t,e])}function li(t,e,n){try{nn=e;var r,i=e._value;e._state?r=t(i):(mt.length&&(mt=[]),r=t(i),mt.indexOf(i)===-1&&di(e)),n.resolve(r)}catch(a){n.reject(a)}finally{nn=null,--Se===0&&Sn(),--n.psd.ref||n.psd.finalize()}}function mr(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,a,o;i!=null?(a=i.name||"Error",o=i.message||i,r=Gt(i,0)):(a=i,o=""),e.push(a+(o?": "+o:"")+r)}return ie&&(r=Gt(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&mr(t._prev,e,n)),e}function yr(t,e){var n=e?e._numPrev+1:0;n<oi&&(t._prev=e,t._numPrev=n)}function ct(){it()&&at()}function it(){var t=tn;return tn=!1,Ct=!1,t}function at(){var t,e,n;do for(;He.length>0;)for(t=He,He=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(He.length>0);tn=!0,Ct=!0}function Sn(){var t=Ce;Ce=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=yt.slice(0),n=e.length;n;)e[--n]()}function ci(t){function e(){t(),yt.splice(yt.indexOf(e),1)}yt.push(e),++Se,Ge(function(){--Se===0&&Sn()},[])}function fi(t){Ce.some(function(e){return e._value===t._value})||Ce.push(t)}function di(t){for(var e=Ce.length;e;)if(Ce[--e]._value===t._value){Ce.splice(e,1);return}}function gt(t){return new E(Xe,!1,t)}function L(t,e){var n=A;return function(){var r=it(),i=A;try{return we(n,!0),t.apply(this,arguments)}catch(a){e&&e(a)}finally{we(i,!1),r&&at()}}}var H={awaits:0,echoes:0,id:0},hi=0,bt=[],Wt=0,St=0,vi=0;function be(t,e,n,r){var i=A,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++vi;var o=Ke.env;a.env=En?{Promise:E,PromiseProp:{value:E,configurable:!0,writable:!0},all:E.all,race:E.race,allSettled:E.allSettled,any:E.any,resolve:E.resolve,reject:E.reject,nthen:Fn(o.nthen,a),gthen:Fn(o.gthen,a)}:{},e&&V(a,e),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=Ue(a,t,n,r);return a.ref===0&&a.finalize(),u}function We(){return H.id||(H.id=++hi),++H.awaits,H.echoes+=fr,H.id}function de(){return H.awaits?(--H.awaits===0&&(H.id=0),H.echoes=H.awaits*fr,!0):!1}(""+dr).indexOf("[native code]")===-1&&(We=de=B);function At(t){return H.echoes&&t&&t.constructor===pt?(We(),t.then(function(e){return de(),e},function(e){return de(),N(e)})):t}function pi(t){++St,(!H.echoes||--H.echoes===0)&&(H.echoes=H.id=0),bt.push(A),we(t,!0)}function mi(){var t=bt[bt.length-1];bt.pop(),we(t,!1)}function we(t,e){var n=A;if((e?H.echoes&&(!Wt++||t!==A):Wt&&(!--Wt||t!==A))&&br(e?pi.bind(null,t):mi),t!==A&&(A=t,n===Ke&&(Ke.env=gr()),En)){var r=Ke.env.Promise,i=t.env;Et.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(F,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function gr(){var t=F.Promise;return En?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(F,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:Et.then,gthen:t.prototype.then}:{}}function Ue(t,e,n,r,i){var a=A;try{return we(t,!0),e(n,r,i)}finally{we(a,!1)}}function br(t){dr.call(Jt,t)}function kt(t,e,n,r){return typeof t!="function"?t:function(){var i=A;n&&We(),we(e,!0);try{return t.apply(this,arguments)}finally{we(i,!1),r&&br(de)}}}function Fn(t,e){return function(n,r){return t.call(this,kt(n,e),kt(r,e))}}var Ln="unhandledrejection";function Wn(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(F.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Ln,!0,!0),V(r,i)):F.CustomEvent&&(r=new CustomEvent(Ln,{detail:i}),V(r,i)),r&&F.dispatchEvent&&(dispatchEvent(r),!F.PromiseRejectionEvent&&F.onunhandledrejection))try{F.onunhandledrejection(r)}catch{}ie&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var N=E.reject;function un(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!A.letThrough&&!t._vip){if(t._state.openComplete)return N(new D.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return N(new D.DatabaseClosed);t.open().catch(B)}return t._state.dbReadyPromise.then(function(){return un(t,e,n,r)})}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(a){return a.name===_n.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return un(t,e,n,r)})):N(a)}return i._promise(e,function(a,o){return be(function(){return A.trans=i,r(a,o,i)})}).then(function(a){return i._completion.then(function(){return a})})}}var Un="3.2.2",Ee=String.fromCharCode(65535),sn=-1/0,oe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",wr="String expected.",qe=[],Bt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),yi=Bt,gi=Bt,_r=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},Ft="__dbnames",Ut="readonly",Nt="readwrite";function ke(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var xr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ft(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=nt(e),delete e[t]),e}:function(e){return e}}var bi=function(){function t(){}return t.prototype._trans=function(e,n,r){var i=this._tx||A.trans,a=this.name;function o(s,l,f){if(!f.schema[a])throw new D.NotFound("Table "+a+" not part of transaction");return n(f.idbtrans,f)}var u=it();try{return i&&i.db===this.db?i===A.trans?i._promise(e,o,r):be(function(){return i._promise(e,o,r)},{trans:i,transless:A.transless||A}):un(this.db,e,[this.name],o)}finally{u&&at()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(i){return r.core.get({trans:i,key:e}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(j(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=U(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(f){return f.compound&&n.every(function(c){return f.keyPath.indexOf(c)>=0})&&f.keyPath.every(function(c){return n.indexOf(c)>=0})})[0];if(r&&this.db._maxKey!==Ee)return this.where(r.name).equals(r.keyPath.map(function(f){return e[f]}));!r&&ie&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function o(f,c){try{return a.cmp(f,c)===0}catch{return!1}}var u=n.reduce(function(f,c){var d=f[0],y=f[1],h=i[c],v=e[c];return[d||h,d||!h?ke(y,h&&h.multi?function(m){var w=ce(m,c);return j(w)&&w.some(function(x){return o(v,x)})}:function(m){return o(v,ce(m,c))}):y]},[null,null]),s=u[0],l=u[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,j(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var i=Object.create(e.prototype);for(var a in r)if(G(r,a))try{i[a]=r[a]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){V(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=e;return o&&a&&(u=ft(o)(e)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?E.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{ee(e,o,s)}catch{}return s})},t.prototype.update=function(e,n){if(typeof e=="object"&&!j(e)){var r=ce(e,this.schema.primKey.keyPath);if(r===void 0)return N(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?U(n).forEach(function(i){ee(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=e;return o&&a&&(u=ft(o)(e)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?E.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{ee(e,o,s)}catch{}return s})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?E.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:xr})}).then(function(n){return n.numFailures?E.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},t.prototype.bulkAdd=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,f=s.keyPath;if(f&&a)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,d=f&&l?e.map(ft(f)):e;return i.core.mutate({trans:u,type:"add",keys:a,values:d,wantResults:o}).then(function(y){var h=y.numFailures,v=y.results,m=y.lastResult,w=y.failures,x=o?v:m;if(h===0)return x;throw new je(i.name+".bulkAdd(): "+h+" of "+c+" operations failed",w)})})},t.prototype.bulkPut=function(e,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,l=s.auto,f=s.keyPath;if(f&&a)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,d=f&&l?e.map(ft(f)):e;return i.core.mutate({trans:u,type:"put",keys:a,values:d,wantResults:o}).then(function(y){var h=y.numFailures,v=y.results,m=y.lastResult,w=y.failures,x=o?v:m;if(h===0)return x;throw new je(i.name+".bulkPut(): "+h+" of "+c+" operations failed",w)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:e})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new je(n.name+".bulkDelete(): "+a+" of "+r+" operations failed",u)})},t}();function ot(t){var e={},n=function(u,s){if(s){for(var l=arguments.length,f=new Array(l-1);--l;)f[l-1]=arguments[l];return e[u].subscribe.apply(null,f),t}else if(typeof u=="string")return e[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,l){if(typeof u=="object")return o(u);s||(s=ai),l||(l=B);var f={subscribers:[],fire:l,subscribe:function(c){f.subscribers.indexOf(c)===-1&&(f.subscribers.push(c),f.fire=s(f.fire,c))},unsubscribe:function(c){f.subscribers=f.subscribers.filter(function(d){return d!==c}),f.fire=f.subscribers.reduce(s,l)}};return e[u]=n[u]=f,f}function o(u){U(u).forEach(function(s){var l=u[s];if(j(l))a(s,u[s][0],u[s][1]);else if(l==="asap")var f=a(s,rt,function(){for(var d=arguments.length,y=new Array(d);d--;)y[d]=arguments[d];f.subscribers.forEach(function(h){nr(function(){h.apply(null,y)})})});else throw new D.InvalidArgument("Invalid event config")})}}function ut(t,e){return Fe(e).from({prototype:t}),e}function wi(t){return ut(bi.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:ot(null,{creating:[ni,B],reading:[ti,rt],updating:[ii,B],deleting:[ri,B]})})}function Oe(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Yt(t,e){t.filter=ke(t.filter,e)}function $t(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return ke(r(),e())}:e,t.justLimit=n&&!r}function _i(t,e){t.isMatch=ke(t.isMatch,e)}function wt(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new D.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Nn(t,e,n){var r=wt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function dt(t,e,n,r){var i=t.replayFilter?ke(t.filter,t.replayFilter()):t.filter;if(t.or){var a={},o=function(u,s,l){if(!i||i(s,l,function(d){return s.stop(d)},function(d){return s.fail(d)})){var f=s.primaryKey,c=""+f;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(f)),G(a,c)||(a[c]=!0,e(u,s,l))}};return Promise.all([t.or._iterate(o,n),Yn(Nn(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}else return Yn(Nn(t,r,n),ke(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Yn(t,e,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=L(i);return t.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!e||e(o,function(s){return u=s},function(s){o.stop(s),u=B},function(s){o.fail(s),u=B}))&&a(o.value,o,function(s){return u=s}),u()})})}function q(t,e){try{var n=$n(t),r=$n(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Ti(zn(t),zn(e));case"Array":return xi(t,e)}}catch{}return NaN}function xi(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a){var o=q(t[a],e[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function Ti(t,e){for(var n=t.length,r=e.length,i=n<r?n:r,a=0;a<i;++a)if(t[a]!==e[a])return t[a]<e[a]?-1:1;return n===r?0:n<r?-1:1}function $n(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=Qt(t);return n==="ArrayBuffer"?"binary":n}function zn(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Ei=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,N.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,N.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=ke(n.algorithm,e)},t.prototype._iterate=function(e,n){return dt(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&V(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return dt(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Oe(i,!0))return a.count({trans:r,query:{index:wt(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return dt(i,function(){return++o,!1},r,a).then(function(){return o})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),i=r[0],a=r.length-1;function o(l,f){return f?o(l[r[f]],f-1):l[i]}var u=this._ctx.dir==="next"?1:-1;function s(l,f){var c=o(l,a),d=o(f,a);return c<d?-u:c>d?u:0}return this.toArray(function(l){return l.sort(s)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Oe(i,!0)&&i.limit>0){var a=i.valueMapper,o=wt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var l=s.result;return a?l.map(a):l})}else{var u=[];return dt(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Oe(n)?$t(n,function(){var r=e;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):$t(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),$t(this._ctx,function(){var n=e;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},t.prototype.until=function(e,n){return Yt(this._ctx,function(r,i,a){return e(r.value)?(i(a),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Yt(this._ctx,function(n){return e(n.value)}),_i(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&Oe(n,!0)&&n.limit>0)return this._read(function(i){var a=wt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Yt(this._ctx,function(i){var a=i.primaryKey.toString(),o=G(r,a);return r[a]=!0,!o}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof e=="function")a=e;else{var o=U(e),u=o.length;a=function(w){for(var x=!1,g=0;g<u;++g){var b=o[g],p=e[b];ce(w,b)!==p&&(ee(w,b,p),x=!0)}return x}}var s=r.table.core,l=s.schema.primaryKey,f=l.outbound,c=l.extractKey,d=n.db._options.modifyChunkSize||200,y=[],h=0,v=[],m=function(w,x){var g=x.failures,b=x.numFailures;h+=w-b;for(var p=0,_=U(g);p<_.length;p++){var C=_[p];y.push(g[C])}};return n.clone().primaryKeys().then(function(w){var x=function(g){var b=Math.min(d,w.length-g);return s.getMany({trans:i,keys:w.slice(g,g+b),cache:"immutable"}).then(function(p){for(var _=[],C=[],T=f?[]:null,k=[],M=0;M<b;++M){var R=p[M],I={value:nt(R),primKey:w[g+M]};a.call(I,I.value,I)!==!1&&(I.value==null?k.push(w[g+M]):!f&&q(c(R),c(I.value))!==0?(k.push(w[g+M]),_.push(I.value)):(C.push(I.value),f&&T.push(w[g+M])))}var P=Oe(r)&&r.limit===1/0&&(typeof e!="function"||e===zt)&&{index:r.index,range:r.range};return Promise.resolve(_.length>0&&s.mutate({trans:i,type:"add",values:_}).then(function(Y){for(var S in Y.failures)k.splice(parseInt(S),1);m(_.length,Y)})).then(function(){return(C.length>0||P&&typeof e=="object")&&s.mutate({trans:i,type:"put",keys:T,values:C,criteria:P,changeSpec:typeof e!="function"&&e}).then(function(Y){return m(C.length,Y)})}).then(function(){return(k.length>0||P&&e===zt)&&s.mutate({trans:i,type:"delete",keys:k,criteria:P}).then(function(Y){return m(k.length,Y)})}).then(function(){return w.length>g+b&&x(g+d)})})};return x(0).then(function(){if(y.length>0)throw new Tt("Error modifying one or more objects",y,h,v);return w.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return Oe(e)&&(e.isPrimKey&&!gi||n.type===3)?this._write(function(r){var i=e.table.core.schema.primaryKey,a=n;return e.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures;u.lastResult,u.results;var l=u.numFailures;if(l)throw new Tt("Could not delete some values",Object.keys(s).map(function(f){return s[f]}),o-l);return o-l})})}):this.modify(zt)},t}(),zt=function(t,e){return e.value=null};function Ci(t){return ut(Ei.prototype,function(n,r){this.db=t;var i=xr,a=null;if(r)try{i=r()}catch(l){a=l}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==rt?s:null}})}function Si(t,e){return t<e?-1:t===e?0:1}function Ai(t,e){return t>e?-1:t===e?0:1}function X(t,e,n){var r=t instanceof Er?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Pe(t){return new t.Collection(t,function(){return Tr("")}).limit(0)}function ki(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Di(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function Mi(t,e,n,r,i,a){for(var o=Math.min(t.length,r.length),u=-1,s=0;s<o;++s){var l=e[s];if(l!==r[s])return i(t[s],n[s])<0?t.substr(0,s)+n[s]+n.substr(s+1):i(t[s],r[s])<0?t.substr(0,s)+r[s]+n.substr(s+1):u>=0?t.substr(0,u)+e[u]+n.substr(u+1):null;i(t[s],l)<0&&(u=s)}return o<r.length&&a==="next"?t+n.substr(t.length):o<t.length&&a==="prev"?t.substr(0,n.length):u<0?null:t.substr(0,u)+r[u]+n.substr(u+1)}function ht(t,e,n,r){var i,a,o,u,s,l,f,c=n.length;if(!n.every(function(v){return typeof v=="string"}))return X(t,wr);function d(v){i=ki(v),a=Di(v),o=v==="next"?Si:Ai;var m=n.map(function(w){return{lower:a(w),upper:i(w)}}).sort(function(w,x){return o(w.lower,x.lower)});u=m.map(function(w){return w.upper}),s=m.map(function(w){return w.lower}),l=v,f=v==="next"?"":r}d("next");var y=new t.Collection(t,function(){return me(u[0],s[c-1]+r)});y._ondirectionchange=function(v){d(v)};var h=0;return y._addAlgorithm(function(v,m,w){var x=v.key;if(typeof x!="string")return!1;var g=a(x);if(e(g,s,h))return!0;for(var b=null,p=h;p<c;++p){var _=Mi(x,g,u[p],s[p],o,l);_===null&&b===null?h=p+1:(b===null||o(b,_)>0)&&(b=_)}return m(b!==null?function(){v.continue(b+f)}:w),!1}),y}function me(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Tr(t){return{type:1,lower:t,upper:t}}var Er=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?Pe(this):new this.Collection(this,function(){return me(e,n,!r,!i)})}catch{return X(this,oe)}},t.prototype.equals=function(e){return e==null?X(this,oe):new this.Collection(this,function(){return Tr(e)})},t.prototype.above=function(e){return e==null?X(this,oe):new this.Collection(this,function(){return me(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?X(this,oe):new this.Collection(this,function(){return me(e,void 0,!1)})},t.prototype.below=function(e){return e==null?X(this,oe):new this.Collection(this,function(){return me(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?X(this,oe):new this.Collection(this,function(){return me(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?X(this,wr):this.between(e,e+Ee,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):ht(this,function(n,r){return n.indexOf(r[0])===0},[e],Ee)},t.prototype.equalsIgnoreCase=function(e){return ht(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=se.apply(Ie,arguments);return e.length===0?Pe(this):ht(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=se.apply(Ie,arguments);return e.length===0?Pe(this):ht(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},e,Ee)},t.prototype.anyOf=function(){var e=this,n=se.apply(Ie,arguments),r=this._cmp;try{n.sort(r)}catch{return X(this,oe)}if(n.length===0)return Pe(this);var i=new this.Collection(this,function(){return me(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?e._ascending:e._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var l=o.key;r(l,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(l,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},t.prototype.notEqual=function(e){return this.inAnyRange([[sn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=se.apply(Ie,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return X(this,oe)}var n=e.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[sn,i]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(e.length===0)return Pe(this);if(!e.every(function(p){return p[0]!==void 0&&p[1]!==void 0&&a(p[0],p[1])<=0}))return X(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var l=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function c(p,_){for(var C=0,T=p.length;C<T;++C){var k=p[C];if(i(_[0],k[1])<0&&i(_[1],k[0])>0){k[0]=u(k[0],_[0]),k[1]=s(k[1],_[1]);break}}return C===T&&p.push(_),p}var d=a;function y(p,_){return d(p[0],_[0])}var h;try{h=e.reduce(c,[]),h.sort(y)}catch{return X(this,oe)}var v=0,m=f?function(p){return a(p,h[v][1])>0}:function(p){return a(p,h[v][1])>=0},w=l?function(p){return o(p,h[v][0])>0}:function(p){return o(p,h[v][0])>=0};function x(p){return!m(p)&&!w(p)}var g=m,b=new this.Collection(this,function(){return me(h[0][0],h[h.length-1][1],!l,!f)});return b._ondirectionchange=function(p){p==="next"?(g=m,d=a):(g=w,d=o),h.sort(y)},b._addAlgorithm(function(p,_,C){for(var T=p.key;g(T);)if(++v,v===h.length)return _(C),!1;return x(T)?!0:(r._cmp(T,h[v][1])===0||r._cmp(T,h[v][0])===0||_(function(){d===a?p.continue(h[v][0]):p.continue(h[v][1])}),!1)}),b},t.prototype.startsWithAnyOf=function(){var e=se.apply(Ie,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?Pe(this):this.inAnyRange(e.map(function(n){return[n,n+Ee]})):X(this,"startsWithAnyOf() only works with strings")},t}();function Oi(t){return ut(Er.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};var a=t._deps.indexedDB;if(!a)throw new D.MissingAPI;this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(o,u){return a.cmp(u,o)},this._max=function(o,u){return a.cmp(o,u)>0?o:u},this._min=function(o,u){return a.cmp(o,u)<0?o:u},this._IDBKeyRange=t._deps.IDBKeyRange})}function re(t){return L(function(e){return Je(e),t(e.target.error),!1})}function Je(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var Ze="storagemutated",ge="x-storagemutated-1",_e=ot(null,Ze),Pi=function(){function t(){}return t.prototype._lock=function(){return ze(!A.global),++this._reculock,this._reculock===1&&!A.global&&(A.lockOwnerFor=this),this},t.prototype._unlock=function(){if(ze(!A.global),--this._reculock===0)for(A.global||(A.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Ue(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&A.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(ze(!this.idbtrans),!e&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new D.DatabaseClosed(i);case"MissingAPIError":throw new D.MissingAPI(i.message,i);default:throw new D.OpenFailed(i)}if(!this.active)throw new D.TransactionInactive;return ze(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=L(function(a){Je(a),n._reject(e.error)}),e.onabort=L(function(a){Je(a),n.active&&n._reject(new D.Abort(e.error)),n.active=!1,n.on("abort").fire(a)}),e.oncomplete=L(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&_e.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var i=this;if(e==="readwrite"&&this.mode!=="readwrite")return N(new D.ReadOnly("Transaction is readonly"));if(!this.active)return N(new D.TransactionInactive);if(this._locked())return new E(function(o,u){i._blockedFuncs.push([function(){i._promise(e,n,r).then(o,u)},A])});if(r)return be(function(){var o=new E(function(u,s){i._lock();var l=n(u,s,i);l&&l.then&&l.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new E(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=E.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new E(function(o,u){r.then(function(s){return n._waitingQueue.push(L(o.bind(null,s)))},function(s){return n._waitingQueue.push(L(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(G(n,e))return n[e];var r=this.schema[e];if(!r)throw new D.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i},t}();function Ri(t){return ut(Pi.prototype,function(n,r,i,a,o){var u=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=ot(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new E(function(s,l){u._resolve=s,u._reject=l}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var l=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):l&&u.idbtrans&&u.idbtrans.abort(),N(s)})})}function ln(t,e,n,r,i,a,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Cr(e)}}function Cr(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Sr(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:rr(n,function(r){return[r.name,r]})}}function Ii(t){return t.length===1?t[0]:t}var et=function(t){try{return t.only([[]]),et=function(){return[[]]},[[]]}catch{return et=function(){return Ee},Ee}};function cn(t){return t==null?function(){}:typeof t=="string"?Ki(t):function(e){return ce(e,t)}}function Ki(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return ce(n,t)}}function Hn(t){return[].slice.call(t)}var Bi=0;function Ve(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function Fi(t,e,n){function r(c,d){var y=Hn(c.objectStoreNames);return{schema:{name:c.name,tables:y.map(function(h){return d.objectStore(h)}).map(function(h){var v=h.keyPath,m=h.autoIncrement,w=j(v),x=v==null,g={},b={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:x,compound:w,keyPath:v,autoIncrement:m,unique:!0,extractKey:cn(v)},indexes:Hn(h.indexNames).map(function(p){return h.index(p)}).map(function(p){var _=p.name,C=p.unique,T=p.multiEntry,k=p.keyPath,M=j(k),R={name:_,compound:M,keyPath:k,unique:C,multiEntry:T,extractKey:cn(k)};return g[Ve(k)]=R,R}),getIndexByKeyPath:function(p){return g[Ve(p)]}};return g[":id"]=b.primaryKey,v!=null&&(g[Ve(v)]=b.primaryKey),b})},hasGetAll:y.length>0&&"getAll"in d.objectStore(y[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var d=c.lower,y=c.upper,h=c.lowerOpen,v=c.upperOpen,m=d===void 0?y===void 0?null:e.upperBound(y,!!v):y===void 0?e.lowerBound(d,!!h):e.bound(d,y,!!h,!!v);return m}function a(c){var d=c.name;function y(m){var w=m.trans,x=m.type,g=m.keys,b=m.values,p=m.range;return new Promise(function(_,C){_=L(_);var T=w.objectStore(d),k=T.keyPath==null,M=x==="put"||x==="add";if(!M&&x!=="delete"&&x!=="deleteRange")throw new Error("Invalid operation type: "+x);var R=(g||b||{length:1}).length;if(g&&b&&g.length!==b.length)throw new Error("Given keys array must have same length as given values array.");if(R===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});var I,P=[],Y=[],S=0,W=function(ne){++S,Je(ne)};if(x==="deleteRange"){if(p.type===4)return _({numFailures:S,failures:Y,results:[],lastResult:void 0});p.type===3?P.push(I=T.clear()):P.push(I=T.delete(i(p)))}else{var z=M?k?[b,g]:[b,null]:[g,null],he=z[0],te=z[1];if(M)for(var J=0;J<R;++J)P.push(I=te&&te[J]!==void 0?T[x](he[J],te[J]):T[x](he[J])),I.onerror=W;else for(var J=0;J<R;++J)P.push(I=T[x](he[J])),I.onerror=W}var ve=function(ne){var Ne=ne.target.result;P.forEach(function(Z,st){return Z.error!=null&&(Y[st]=Z.error)}),_({numFailures:S,failures:Y,results:x==="delete"?g:P.map(function(Z){return Z.result}),lastResult:Ne})};I.onerror=function(ne){W(ne),ve(ne)},I.onsuccess=ve})}function h(m){var w=m.trans,x=m.values,g=m.query,b=m.reverse,p=m.unique;return new Promise(function(_,C){_=L(_);var T=g.index,k=g.range,M=w.objectStore(d),R=T.isPrimaryKey?M:M.index(T.name),I=b?p?"prevunique":"prev":p?"nextunique":"next",P=x||!("openKeyCursor"in R)?R.openCursor(i(k),I):R.openKeyCursor(i(k),I);P.onerror=re(C),P.onsuccess=L(function(Y){var S=P.result;if(!S){_(null);return}S.___id=++Bi,S.done=!1;var W=S.continue.bind(S),z=S.continuePrimaryKey;z&&(z=z.bind(S));var he=S.advance.bind(S),te=function(){throw new Error("Cursor not started")},J=function(){throw new Error("Cursor not stopped")};S.trans=w,S.stop=S.continue=S.continuePrimaryKey=S.advance=te,S.fail=L(C),S.next=function(){var ve=this,ne=1;return this.start(function(){return ne--?ve.continue():ve.stop()}).then(function(){return ve})},S.start=function(ve){var ne=new Promise(function(Z,st){Z=L(Z),P.onerror=re(st),S.fail=st,S.stop=function(Kr){S.stop=S.continue=S.continuePrimaryKey=S.advance=J,Z(Kr)}}),Ne=function(){if(P.result)try{ve()}catch(Z){S.fail(Z)}else S.done=!0,S.start=function(){throw new Error("Cursor behind last entry")},S.stop()};return P.onsuccess=L(function(Z){P.onsuccess=Ne,Ne()}),S.continue=W,S.continuePrimaryKey=z,S.advance=he,Ne(),ne},_(S)},C)})}function v(m){return function(w){return new Promise(function(x,g){x=L(x);var b=w.trans,p=w.values,_=w.limit,C=w.query,T=_===1/0?void 0:_,k=C.index,M=C.range,R=b.objectStore(d),I=k.isPrimaryKey?R:R.index(k.name),P=i(M);if(_===0)return x({result:[]});if(m){var Y=p?I.getAll(P,T):I.getAllKeys(P,T);Y.onsuccess=function(he){return x({result:he.target.result})},Y.onerror=re(g)}else{var S=0,W=p||!("openKeyCursor"in I)?I.openCursor(P):I.openKeyCursor(P),z=[];W.onsuccess=function(he){var te=W.result;if(!te)return x({result:z});if(z.push(p?te.value:te.primaryKey),++S===_)return x({result:z});te.continue()},W.onerror=re(g)}})}}return{name:d,schema:c,mutate:y,getMany:function(m){var w=m.trans,x=m.keys;return new Promise(function(g,b){g=L(g);for(var p=w.objectStore(d),_=x.length,C=new Array(_),T=0,k=0,M,R=function(S){var W=S.target;(C[W._pos]=W.result)!=null,++k===T&&g(C)},I=re(b),P=0;P<_;++P){var Y=x[P];Y!=null&&(M=p.get(x[P]),M._pos=P,M.onsuccess=R,M.onerror=I,++T)}T===0&&g(C)})},get:function(m){var w=m.trans,x=m.key;return new Promise(function(g,b){g=L(g);var p=w.objectStore(d),_=p.get(x);_.onsuccess=function(C){return g(C.target.result)},_.onerror=re(b)})},query:v(s),openCursor:h,count:function(m){var w=m.query,x=m.trans,g=w.index,b=w.range;return new Promise(function(p,_){var C=x.objectStore(d),T=g.isPrimaryKey?C:C.index(g.name),k=i(b),M=k?T.count(k):T.count();M.onsuccess=L(function(R){return p(R.target.result)}),M.onerror=re(_)})}}}var o=r(t,n),u=o.schema,s=o.hasGetAll,l=u.tables.map(function(c){return a(c)}),f={};return l.forEach(function(c){return f[c.name]=c}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(c){var d=f[c];if(!d)throw new Error("Table '"+c+"' not found");return f[c]},MIN_KEY:-1/0,MAX_KEY:et(e),schema:u}}function Li(t,e){return e.reduce(function(n,r){var i=r.create;return O(O({},n),i(n))},t)}function Wi(t,e,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=Li(Fi(e,i,r),t.dbcore);return{dbcore:a}}function An(t,e){var n=t._novip,r=e.db,i=Wi(n._middlewares,r,n._deps,e);n.core=i.dbcore,n.tables.forEach(function(a){var o=a.name;n.core.schema.tables.some(function(u){return u.name===o})&&(a.core=n.core.table(o),n[o]instanceof n.Table&&(n[o].core=a.core))})}function Dt(t,e,n,r){var i=t._novip;n.forEach(function(a){var o=r[a];e.forEach(function(u){var s=gn(u,a);(!s||"value"in s&&s.value===void 0)&&(u===i.Transaction.prototype||u instanceof i.Transaction?fe(u,a,{get:function(){return this.table(a)},set:function(l){er(this,a,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):u[a]=new i.Table(a,o))})})}function fn(t,e){var n=t._novip;e.forEach(function(r){for(var i in r)r[i]instanceof n.Table&&delete r[i]})}function Ui(t,e){return t._cfg.version-e._cfg.version}function Ni(t,e,n,r){var i=t._dbSchema,a=t._createTransaction("readwrite",t._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=A.transless||A;be(function(){A.trans=a,A.transless=u,e===0?(U(i).forEach(function(s){kn(n,s,i[s].primKey,i[s].indexes)}),An(t,n),E.follow(function(){return t.on.populate.fire(a)}).catch(o)):Yi(t,e,a,n).catch(o)})}function Yi(t,e,n,r){var i=t._novip,a=[],o=i._versions,u=i._dbSchema=Dn(i,i.idbdb,r),s=!1,l=o.filter(function(c){return c._cfg.version>=e});l.forEach(function(c){a.push(function(){var d=u,y=c._cfg.dbschema;hn(i,d,r),hn(i,y,r),u=i._dbSchema=y;var h=Ar(d,y);h.add.forEach(function(b){kn(r,b[0],b[1].primKey,b[1].indexes)}),h.change.forEach(function(b){if(b.recreate)throw new D.Upgrade("Not yet support for changing primary key");var p=r.objectStore(b.name);b.add.forEach(function(_){return dn(p,_)}),b.change.forEach(function(_){p.deleteIndex(_.name),dn(p,_)}),b.del.forEach(function(_){return p.deleteIndex(_)})});var v=c._cfg.contentUpgrade;if(v&&c._cfg.version>e){An(i,r),n._memoizedTables={},s=!0;var m=ir(y);h.del.forEach(function(b){m[b]=d[b]}),fn(i,[i.Transaction.prototype]),Dt(i,[i.Transaction.prototype],U(m),m),n.schema=m;var w=bn(v);w&&We();var x,g=E.follow(function(){if(x=v(n),x&&w){var b=de.bind(null,null);x.then(b,b)}});return x&&typeof x.then=="function"?E.resolve(x):g.then(function(){return x})}}),a.push(function(d){if(!s||!yi){var y=c._cfg.dbschema;zi(y,d)}fn(i,[i.Transaction.prototype]),Dt(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema})});function f(){return a.length?E.resolve(a.shift()(n.idbtrans)).then(f):E.resolve()}return f().then(function(){$i(u,r)})}function Ar(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],a=e[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!Bt)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,l=void 0;for(l in u)s[l]||o.del.push(l);for(l in s){var f=u[l],c=s[l];f?f.src!==c.src&&o.change.push(c):o.add.push(c)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function kn(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return dn(i,a)}),i}function $i(t,e){U(t).forEach(function(n){e.db.objectStoreNames.contains(n)||kn(e,n,t[n].primKey,t[n].indexes)})}function zi(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function dn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Dn(t,e,n){var r={},i=It(e.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=ln(Cr(u),u||"",!1,!1,!!o.autoIncrement,u&&typeof u!="string",!0),l=[],f=0;f<o.indexNames.length;++f){var c=o.index(o.indexNames[f]);u=c.keyPath;var d=ln(c.name,u,!!c.unique,!!c.multiEntry,!1,u&&typeof u!="string",!1);l.push(d)}r[a]=Sr(a,s,l)}),r}function Hi(t,e,n){var r=t._novip;r.verno=e.version/10;var i=r._dbSchema=Dn(r,e,n);r._storeNames=It(e.objectStoreNames,0),Dt(r,[r._allTables],U(i),i)}function ji(t,e){var n=Dn(t,t.idbdb,e),r=Ar(n,t._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function hn(t,e,n){for(var r=t._novip,i=n.db.objectStoreNames,a=0;a<i.length;++a){var o=i[a],u=n.objectStore(o);r._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var l=u.indexNames[s],f=u.index(l).keyPath,c=typeof f=="string"?f:"["+It(f).join("+")+"]";if(e[o]){var d=e[o].idxByName[c];d&&(d.name=l,delete e[o].idxByName[c],e[o].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&F.WorkerGlobalScope&&F instanceof F.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function qi(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return ln(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),j(i),n===0)})}var Vi=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){U(e).forEach(function(r){if(e[r]!==null){var i=qi(e[r]),a=i.shift();if(a.multi)throw new D.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=Sr(r,a,i)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?V(this._cfg.storesSource,e):e;var r=n._versions,i={},a={};return r.forEach(function(o){V(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,fn(n,[n._allTables,n,n.Transaction.prototype]),Dt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],U(a),a),n._storeNames=U(a),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=xn(this._cfg.contentUpgrade||B,e),this},t}();function Qi(t){return ut(Vi.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Mn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new In(Ft,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function On(t){return t&&typeof t.databases=="function"}function Xi(t){var e=t.indexedDB,n=t.IDBKeyRange;return On(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Ft})}):Mn(e,n).toCollection().primaryKeys()}function Gi(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!On(n)&&e!==Ft&&Mn(n,r).put({name:e}).catch(B)}function Ji(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!On(n)&&e!==Ft&&Mn(n,r).delete(e).catch(B)}function vn(t){return be(function(){return A.letThrough=!0,t()})}function Zi(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function ea(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?N(e.dbOpenError):t});ie&&(e.openCanceller._stackHolder=Me()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}var a=e.dbReadyResolve,o=null,u=!1;return E.race([r,(typeof navigator>"u"?E.resolve():Zi()).then(function(){return new E(function(s,l){if(i(),!n)throw new D.MissingAPI;var f=t.name,c=e.autoSchema?n.open(f):n.open(f,Math.round(t.verno*10));if(!c)throw new D.MissingAPI;c.onerror=re(l),c.onblocked=L(t._fireOnBlocked),c.onupgradeneeded=L(function(d){if(o=c.transaction,e.autoSchema&&!t._options.allowEmptyDB){c.onerror=Je,o.abort(),c.result.close();var y=n.deleteDatabase(f);y.onsuccess=y.onerror=L(function(){l(new D.NoSuchDatabase("Database "+f+" doesnt exist"))})}else{o.onerror=re(l);var h=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;u=h<1,t._novip.idbdb=c.result,Ni(t,h/10,o,l)}},l),c.onsuccess=L(function(){o=null;var d=t._novip.idbdb=c.result,y=It(d.objectStoreNames);if(y.length>0)try{var h=d.transaction(Ii(y),"readonly");e.autoSchema?Hi(t,d,h):(hn(t,t._dbSchema,h),ji(t,h)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),An(t,h)}catch{}qe.push(t),d.onversionchange=L(function(v){e.vcFired=!0,t.on("versionchange").fire(v)}),d.onclose=L(function(v){t.on("close").fire(v)}),u&&Gi(t._deps,f),s()},l)})})]).then(function(){return i(),e.onReadyBeingFired=[],E.resolve(vn(function(){return t.on.ready.fire(t.vip)})).then(function s(){if(e.onReadyBeingFired.length>0){var l=e.onReadyBeingFired.reduce(xn,B);return e.onReadyBeingFired=[],E.resolve(vn(function(){return l(t.vip)})).then(s)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(s){e.dbOpenError=s;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),N(s)}).finally(function(){e.openComplete=!0,a()})}function pn(t){var e=function(o){return t.next(o)},n=function(o){return t.throw(o)},r=a(e),i=a(n);function a(o){return function(u){var s=o(u),l=s.value;return s.done?l:!l||typeof l.then!="function"?j(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return a(e)()}function ta(t,e,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=ar(i);return[t,a,n]}function kr(t,e,n,r,i){return E.resolve().then(function(){var a=A.transless||A,o=t._createTransaction(e,n,t._dbSchema,r),u={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===_n.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return kr(t,e,n,null,i)})):N(c)}var s=bn(i);s&&We();var l,f=E.follow(function(){if(l=i.call(o,o),l)if(s){var c=de.bind(null,null);l.then(c,c)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=pn(l))},u);return(l&&typeof l.then=="function"?E.resolve(l).then(function(c){return o.active?c:N(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return l})).then(function(c){return r&&o._resolve(),o._completion.then(function(){return c})}).catch(function(c){return o._reject(c),N(c)})})}function vt(t,e,n){for(var r=j(t)?t.slice():[t],i=0;i<n;++i)r.push(e);return r}function na(t){return O(O({},t),{table:function(e){var n=t.table(e),r=n.schema,i={},a=[];function o(v,m,w){var x=Ve(v),g=i[x]=i[x]||[],b=v==null?0:typeof v=="string"?1:v.length,p=m>0,_=O(O({},w),{isVirtual:p,keyTail:m,keyLength:b,extractKey:cn(v),unique:!p&&w.unique});if(g.push(_),_.isPrimaryKey||a.push(_),b>1){var C=b===2?v[0]:v.slice(0,b-1);o(C,m+1,w)}return g.sort(function(T,k){return T.keyTail-k.keyTail}),_}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,l=r.indexes;s<l.length;s++){var f=l[s];o(f.keyPath,0,f)}function c(v){var m=i[Ve(v)];return m&&m[0]}function d(v,m){return{type:v.type===1?2:v.type,lower:vt(v.lower,v.lowerOpen?t.MAX_KEY:t.MIN_KEY,m),lowerOpen:!0,upper:vt(v.upper,v.upperOpen?t.MIN_KEY:t.MAX_KEY,m),upperOpen:!0}}function y(v){var m=v.query.index;return m.isVirtual?O(O({},v),{query:{index:m,range:d(v.query.range,m.keyTail)}}):v}var h=O(O({},n),{schema:O(O({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:c}),count:function(v){return n.count(y(v))},query:function(v){return n.query(y(v))},openCursor:function(v){var m=v.query.index,w=m.keyTail,x=m.isVirtual,g=m.keyLength;if(!x)return n.openCursor(v);function b(p){function _(T){T!=null?p.continue(vt(T,v.reverse?t.MAX_KEY:t.MIN_KEY,w)):v.unique?p.continue(p.key.slice(0,g).concat(v.reverse?t.MIN_KEY:t.MAX_KEY,w)):p.continue()}var C=Object.create(p,{continue:{value:_},continuePrimaryKey:{value:function(T,k){p.continuePrimaryKey(vt(T,t.MAX_KEY,w),k)}},primaryKey:{get:function(){return p.primaryKey}},key:{get:function(){var T=p.key;return g===1?T[0]:T.slice(0,g)}},value:{get:function(){return p.value}}});return C}return n.openCursor(y(v)).then(function(p){return p&&b(p)})}});return h}})}var ra={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:na};function Pn(t,e,n,r){return n=n||{},r=r||"",U(t).forEach(function(i){if(!G(e,i))n[r+i]=void 0;else{var a=t[i],o=e[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=Qt(a),s=Qt(o);u!==s?n[r+i]=e[i]:u==="Object"?Pn(a,o,n,r+i+"."):a!==o&&(n[r+i]=e[i])}else a!==o&&(n[r+i]=e[i])}}),U(e).forEach(function(i){G(t,i)||(n[r+i]=e[i])}),n}function ia(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var aa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return O(O({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,i=O(O({},n),{mutate:function(a){var o=A.trans,u=o.table(e).hook,s=u.deleting,l=u.creating,f=u.updating;switch(a.type){case"add":if(l.fire===B)break;return o._promise("readwrite",function(){return c(a)},!0);case"put":if(l.fire===B&&f.fire===B)break;return o._promise("readwrite",function(){return c(a)},!0);case"delete":if(s.fire===B)break;return o._promise("readwrite",function(){return c(a)},!0);case"deleteRange":if(s.fire===B)break;return o._promise("readwrite",function(){return d(a)},!0)}return n.mutate(a);function c(h){var v=A.trans,m=h.keys||ia(r,h);if(!m)throw new Error("Keys missing");return h=h.type==="add"||h.type==="put"?O(O({},h),{keys:m}):O({},h),h.type!=="delete"&&(h.values=qt([],h.values,!0)),h.keys&&(h.keys=qt([],h.keys,!0)),oa(n,h,m).then(function(w){var x=m.map(function(g,b){var p=w[b],_={onerror:null,onsuccess:null};if(h.type==="delete")s.fire.call(_,g,p,v);else if(h.type==="add"||p===void 0){var C=l.fire.call(_,g,h.values[b],v);g==null&&C!=null&&(g=C,h.keys[b]=g,r.outbound||ee(h.values[b],r.keyPath,g))}else{var T=Pn(p,h.values[b]),k=f.fire.call(_,T,g,p,v);if(k){var M=h.values[b];Object.keys(k).forEach(function(R){G(M,R)?M[R]=k[R]:ee(M,R,k[R])})}}return _});return n.mutate(h).then(function(g){for(var b=g.failures,p=g.results,_=g.numFailures,C=g.lastResult,T=0;T<m.length;++T){var k=p?p[T]:m[T],M=x[T];k==null?M.onerror&&M.onerror(b[T]):M.onsuccess&&M.onsuccess(h.type==="put"&&w[T]?h.values[T]:k)}return{failures:b,results:p,numFailures:_,lastResult:C}}).catch(function(g){return x.forEach(function(b){return b.onerror&&b.onerror(g)}),Promise.reject(g)})})}function d(h){return y(h.trans,h.range,1e4)}function y(h,v,m){return n.query({trans:h,values:!1,query:{index:r,range:v},limit:m}).then(function(w){var x=w.result;return c({type:"delete",keys:x,trans:h}).then(function(g){return g.numFailures>0?Promise.reject(g.failures[0]):x.length<m?{failures:[],numFailures:0,lastResult:void 0}:y(h,O(O({},v),{lower:x[x.length-1],lowerOpen:!0}),m)})})}}});return i}})}};function oa(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function Dr(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],i=0,a=0;i<e.keys.length&&a<t.length;++i)q(e.keys[i],t[a])===0&&(r.push(n?nt(e.values[i]):e.values[i]),++a);return r.length===t.length?r:null}catch{return null}}var ua={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return O(O({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Dr(r.keys,r.trans._cache,r.cache==="clone");return i?E.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?nt(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Ht;function Rn(t){return!("from"in t)}var ue=function(t,e){if(this)V(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new ue;return t&&"d"in t&&V(n,t),n}};Be(ue.prototype,(Ht={add:function(t){return Mt(this,t),this},addKey:function(t){return tt(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return tt(e,n,n)}),this}},Ht[Xt]=function(){return mn(this)},Ht));function tt(t,e,n){var r=q(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Rn(t))return V(t,{from:e,to:n,d:1});var i=t.l,a=t.r;if(q(n,t.from)<0)return i?tt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},jn(t);if(q(e,t.to)>0)return a?tt(a,e,n):t.r={from:e,to:n,d:1,l:null,r:null},jn(t);q(e,t.from)<0&&(t.from=e,t.l=null,t.d=a?a.d+1:1),q(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var o=!t.r;i&&!t.l&&Mt(t,i),a&&o&&Mt(t,a)}}function Mt(t,e){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;tt(r,a,o),u&&n(r,u),s&&n(r,s)}Rn(e)||n(t,e)}function sa(t,e){var n=mn(e),r=n.next();if(r.done)return!1;for(var i=r.value,a=mn(t),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(q(u.from,i.to)<=0&&q(u.to,i.from)>=0)return!0;q(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function mn(t){var e=Rn(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&q(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||q(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function jn(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=O({},t),u=t[i];t.from=u.from,t.to=u.to,t[i]=u[i],o[i]=u[a],t[a]=o,o.d=qn(o)}t.d=qn(t)}function qn(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var la={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new ue(t.MIN_KEY,t.MAX_KEY);return O(O({},t),{table:function(r){var i=t.table(r),a=i.schema,o=a.primaryKey,u=o.extractKey,s=o.outbound,l=O(O({},i),{mutate:function(d){var y=d.trans,h=y.mutatedParts||(y.mutatedParts={}),v=function(C){var T="idb://"+e+"/"+r+"/"+C;return h[T]||(h[T]=new ue)},m=v(""),w=v(":dels"),x=d.type,g=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[],b=g[0],p=g[1],_=d.trans._cache;return i.mutate(d).then(function(C){if(j(b)){x!=="delete"&&(b=C.results),m.addKeys(b);var T=Dr(b,_);!T&&x!=="add"&&w.addKeys(b),(T||p)&&ca(v,a,T,p)}else if(b){var k={from:b.lower,to:b.upper};w.add(k),m.add(k)}else m.add(n),w.add(n),a.indexes.forEach(function(M){return v(M.name).add(n)});return C})}}),f=function(d){var y,h,v=d.query,m=v.index,w=v.range;return[m,new ue((y=w.lower)!==null&&y!==void 0?y:t.MIN_KEY,(h=w.upper)!==null&&h!==void 0?h:t.MAX_KEY)]},c={get:function(d){return[o,new ue(d.key)]},getMany:function(d){return[o,new ue().addKeys(d.keys)]},count:f,query:f,openCursor:f};return U(c).forEach(function(d){l[d]=function(y){var h=A.subscr;if(h){var v=function(_){var C="idb://"+e+"/"+r+"/"+_;return h[C]||(h[C]=new ue)},m=v(""),w=v(":dels"),x=c[d](y),g=x[0],b=x[1];if(v(g.name||"").add(b),!g.isPrimaryKey)if(d==="count")w.add(n);else{var p=d==="query"&&s&&y.values&&i.query(O(O({},y),{values:!1}));return i[d].apply(this,arguments).then(function(_){if(d==="query"){if(s&&y.values)return p.then(function(M){var R=M.result;return m.addKeys(R),_});var C=y.values?_.result.map(u):_.result;y.values?m.addKeys(C):w.addKeys(C)}else if(d==="openCursor"){var T=_,k=y.values;return T&&Object.create(T,{key:{get:function(){return w.addKey(T.primaryKey),T.key}},primaryKey:{get:function(){var M=T.primaryKey;return w.addKey(M),M}},value:{get:function(){return k&&m.addKey(T.primaryKey),T.value}}})}return _})}}return i[d].apply(this,arguments)}}),l}})}};function ca(t,e,n,r){function i(a){var o=t(a.name||"");function u(l){return l!=null?a.extractKey(l):null}var s=function(l){return a.multiEntry&&j(l)?l.forEach(function(f){return o.addKey(f)}):o.addKey(l)};(n||r).forEach(function(l,f){var c=n&&u(n[f]),d=r&&u(r[f]);q(c,d)!==0&&(c!=null&&s(c),d!=null&&s(d))})}e.indexes.forEach(i)}var In=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var i=t.dependencies;this._options=n=O({addons:t.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:B,dbReadyPromise:null,cancelOpen:B,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};o.dbReadyPromise=new E(function(u){o.dbReadyResolve=u}),o.openCanceller=new E(function(u,s){o.cancelOpen=s}),this._state=o,this.name=e,this.on=ot(this,"populate","blocked","versionchange","close",{ready:[xn,B]}),this.on.ready.subscribe=tr(this.on.ready.subscribe,function(u){return function(s,l){t.vip(function(){var f=r._state;if(f.openComplete)f.dbOpenError||E.resolve().then(s),l&&u(s);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(s),l&&u(s);else{u(s);var c=r;l||u(function d(){c.on.ready.unsubscribe(s),c.on.ready.unsubscribe(d)})}})}}),this.Collection=Ci(this),this.Table=wi(this),this.Transaction=Ri(this),this.Version=Qi(this),this.WhereClause=Oi(this),this.on("versionchange",function(u){u.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(u){!u.newVersion||u.newVersion<u.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+u.oldVersion/10)}),this._maxKey=et(n.IDBKeyRange),this._createTransaction=function(u,s,l,f){return new r.Transaction(u,s,l,r._options.chromeTransactionDurability,f)},this._fireOnBlocked=function(u){r.on("blocked").fire(u),qe.filter(function(s){return s.name===r.name&&s!==r&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(u)})},this.use(ra),this.use(aa),this.use(la),this.use(ua),this.vip=Object.create(this,{_vip:{value:!0}}),a.forEach(function(u){return u(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new D.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(i){return i._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(Ui),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||A.letThrough||this._vip)?e():new E(function(r,i){if(n._state.openComplete)return i(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){i(new D.DatabaseClosed);return}n.open().catch(B)}n._state.dbReadyPromise.then(r,i)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,i=e.level,a=e.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(u,s){return u.level-s.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,i=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},t.prototype.open=function(){return ea(this)},t.prototype._close=function(){var e=this._state,n=qe.indexOf(this);if(n>=0&&qe.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new E(function(r){e.dbReadyResolve=r}),e.openCanceller=new E(function(r,i){e.cancelOpen=i})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new D.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new E(function(i,a){var o=function(){e.close();var u=e._deps.indexedDB.deleteDatabase(e.name);u.onsuccess=L(function(){Ji(e._deps,e.name),i()}),u.onerror=re(a),u.onblocked=e._fireOnBlocked};if(n)throw new D.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return U(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=ta.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var i=this,a=A.trans;(!a||a.db!==this||e.indexOf("!")!==-1)&&(a=null);var o=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(f){var c=f instanceof i.Table?f.name:f;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===Ut)u=Ut;else if(e=="rw"||e==Nt)u=Nt;else throw new D.InvalidArgument("Invalid transaction mode: "+e);if(a){if(a.mode===Ut&&u===Nt)if(o)a=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(f){if(a&&a.storeNames.indexOf(f)===-1)if(o)a=null;else throw new D.SubTransaction("Table "+f+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(f){return a?a._promise(null,function(c,d){d(f)}):N(f)}var l=kr.bind(null,this,u,s,a,r);return a?a._promise(u,l,"lock"):A.trans?Ue(A.transless,function(){return i._whenReady(l)}):this._whenReady(l)},t.prototype.table=function(e){if(!G(this._allTables,e))throw new D.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),fa=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",da=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[fa]=function(){return this},t}();function Mr(t,e){return U(e).forEach(function(n){var r=t[n]||(t[n]=new ue);Mt(r,e[n])}),t}function ha(t){return new da(function(e){var n=bn(t);function r(y){n&&We();var h=function(){return be(t,{subscr:y,trans:null})},v=A.trans?Ue(A.transless,h):h();return n&&v.then(de,de),v}var i=!1,a={},o={},u={get closed(){return i},unsubscribe:function(){i=!0,_e.storagemutated.unsubscribe(c)}};e.start&&e.start(u);var s=!1,l=!1;function f(){return U(o).some(function(y){return a[y]&&sa(a[y],o[y])})}var c=function(y){Mr(a,y),f()&&d()},d=function(){if(!(s||i)){a={};var y={},h=r(y);l||(_e(Ze,c),l=!0),s=!0,Promise.resolve(h).then(function(v){s=!1,!i&&(f()?d():(a={},o=y,e.next&&e.next(v)))},function(v){s=!1,e.error&&e.error(v),u.unsubscribe()})}};return d(),u})}var yn;try{yn={indexedDB:F.indexedDB||F.mozIndexedDB||F.webkitIndexedDB||F.msIndexedDB,IDBKeyRange:F.IDBKeyRange||F.webkitIDBKeyRange}}catch{yn={indexedDB:null,IDBKeyRange:null}}var Te=In;Be(Te,O(O({},Kt),{delete:function(t){var e=new Te(t,{addons:[]});return e.delete()},exists:function(t){return new Te(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Xi(Te.dependencies).then(t)}catch{return N(new D.MissingAPI)}},defineClass:function(){function t(e){V(this,e)}return t},ignoreTransaction:function(t){return A.trans?Ue(A.transless,t):t()},vip:vn,async:function(t){return function(){try{var e=pn(t.apply(this,arguments));return!e||typeof e.then!="function"?E.resolve(e):e}catch(n){return N(n)}}},spawn:function(t,e,n){try{var r=pn(t.apply(n,e||[]));return!r||typeof r.then!="function"?E.resolve(r):r}catch(i){return N(i)}},currentTransaction:{get:function(){return A.trans||null}},waitFor:function(t,e){var n=E.resolve(typeof t=="function"?Te.ignoreTransaction(t):t).timeout(e||6e4);return A.trans?A.trans.waitFor(n):n},Promise:E,debug:{get:function(){return ie},set:function(t){ur(t,t==="dexie"?function(){return!0}:_r)}},derive:Fe,extend:V,props:Be,override:tr,Events:ot,on:_e,liveQuery:ha,extendObservabilitySet:Mr,getByKeyPath:ce,setByKeyPath:ee,delByKeyPath:Hr,shallowClone:ir,deepClone:nt,getObjectDiff:Pn,cmp:q,asap:nr,minKey:sn,addons:[],connections:qe,errnames:_n,dependencies:yn,semVer:Un,version:Un.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));Te.maxKey=et(Te.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_e(Ze,function(t){if(!le){var e;Bt?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ge,!0,!0,t)):e=new CustomEvent(ge,{detail:t}),le=!0,dispatchEvent(e),le=!1}}),addEventListener(ge,function(t){var e=t.detail;le||Ot(e)}));function Ot(t){var e=le;try{le=!0,_e.storagemutated.fire(t)}finally{le=e}}var le=!1;if(typeof BroadcastChannel<"u"){var Vn=new BroadcastChannel(ge);_e(Ze,function(t){le||Vn.postMessage(t)}),Vn.onmessage=function(t){t.data&&Ot(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){_e(Ze,function(t){try{le||(typeof localStorage<"u"&&localStorage.setItem(ge,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&qt([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:ge,changedParts:t})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(t){if(t.key===ge){var e=JSON.parse(t.newValue);e&&Ot(e.changedParts)}});var Qn=self.document&&navigator.serviceWorker;Qn&&Qn.addEventListener("message",va)}function va(t){var e=t.data;e&&e.type===ge&&Ot(e.changedParts)}E.rejectionMapper=ei;ur(ie,_r);function De(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Q(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function _t(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(n){return typeof n}:_t=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_t(t)}function ae(t){Q(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||_t(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function pa(t,e){Q(2,arguments);var n=ae(t).getTime(),r=De(e);return new Date(n+r)}var ma={};function Lt(){return ma}function ya(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function xt(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xt=function(n){return typeof n}:xt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xt(t)}function ga(t){return Q(1,arguments),t instanceof Date||xt(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ba(t){if(Q(1,arguments),!ga(t)&&typeof t!="number")return!1;var e=ae(t);return!isNaN(Number(e))}function wa(t,e){Q(2,arguments);var n=De(e);return pa(t,-n)}var _a=864e5;function xa(t){Q(1,arguments);var e=ae(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/_a)+1}function Pt(t){Q(1,arguments);var e=1,n=ae(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Or(t){Q(1,arguments);var e=ae(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=Pt(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=Pt(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function Ta(t){Q(1,arguments);var e=Or(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Pt(n);return r}var Ea=6048e5;function Ca(t){Q(1,arguments);var e=ae(t),n=Pt(e).getTime()-Ta(e).getTime();return Math.round(n/Ea)+1}function Rt(t,e){var n,r,i,a,o,u,s,l;Q(1,arguments);var f=Lt(),c=De((n=(r=(i=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&r!==void 0?r:(s=f.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:0);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=ae(t),y=d.getUTCDay(),h=(y<c?7:0)+y-c;return d.setUTCDate(d.getUTCDate()-h),d.setUTCHours(0,0,0,0),d}function Pr(t,e){var n,r,i,a,o,u,s,l;Q(1,arguments);var f=ae(t),c=f.getUTCFullYear(),d=Lt(),y=De((n=(r=(i=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(s=d.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=new Date(0);h.setUTCFullYear(c+1,0,y),h.setUTCHours(0,0,0,0);var v=Rt(h,e),m=new Date(0);m.setUTCFullYear(c,0,y),m.setUTCHours(0,0,0,0);var w=Rt(m,e);return f.getTime()>=v.getTime()?c+1:f.getTime()>=w.getTime()?c:c-1}function Sa(t,e){var n,r,i,a,o,u,s,l;Q(1,arguments);var f=Lt(),c=De((n=(r=(i=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(s=f.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1),d=Pr(t,e),y=new Date(0);y.setUTCFullYear(d,0,c),y.setUTCHours(0,0,0,0);var h=Rt(y,e);return h}var Aa=6048e5;function ka(t,e){Q(1,arguments);var n=ae(t),r=Rt(n,e).getTime()-Sa(n,e).getTime();return Math.round(r/Aa)+1}function K(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Da={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return K(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):K(r+1,2)},d:function(e,n){return K(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return K(e.getUTCHours()%12||12,n.length)},H:function(e,n){return K(e.getUTCHours(),n.length)},m:function(e,n){return K(e.getUTCMinutes(),n.length)},s:function(e,n){return K(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,r-3));return K(a,n.length)}};const pe=Da;var Re={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ma={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return pe.y(e,n)},Y:function(e,n,r,i){var a=Pr(e,i),o=a>0?a:1-a;if(n==="YY"){var u=o%100;return K(u,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):K(o,n.length)},R:function(e,n){var r=Or(e);return K(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return K(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return K(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return K(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return pe.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return K(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var a=ka(e,i);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):K(a,n.length)},I:function(e,n,r){var i=Ca(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):K(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):pe.d(e,n)},D:function(e,n,r){var i=xa(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):K(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var a=e.getUTCDay(),o=(a-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return K(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var a=e.getUTCDay(),o=(a-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return K(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),a=i===0?7:i;switch(n){case"i":return String(a);case"ii":return K(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),a=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),a;switch(i===12?a=Re.noon:i===0?a=Re.midnight:a=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),a;switch(i>=17?a=Re.evening:i>=12?a=Re.afternoon:i>=4?a=Re.morning:a=Re.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return pe.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):pe.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):K(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):K(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):pe.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):pe.s(e,n)},S:function(e,n){return pe.S(e,n)},X:function(e,n,r,i){var a=i._originalDate||e,o=a.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Gn(o);case"XXXX":case"XX":return xe(o);case"XXXXX":case"XXX":default:return xe(o,":")}},x:function(e,n,r,i){var a=i._originalDate||e,o=a.getTimezoneOffset();switch(n){case"x":return Gn(o);case"xxxx":case"xx":return xe(o);case"xxxxx":case"xxx":default:return xe(o,":")}},O:function(e,n,r,i){var a=i._originalDate||e,o=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Xn(o,":");case"OOOO":default:return"GMT"+xe(o,":")}},z:function(e,n,r,i){var a=i._originalDate||e,o=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Xn(o,":");case"zzzz":default:return"GMT"+xe(o,":")}},t:function(e,n,r,i){var a=i._originalDate||e,o=Math.floor(a.getTime()/1e3);return K(o,n.length)},T:function(e,n,r,i){var a=i._originalDate||e,o=a.getTime();return K(o,n.length)}};function Xn(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=r%60;if(a===0)return n+String(i);var o=e||"";return n+String(i)+o+K(a,2)}function Gn(t,e){if(t%60===0){var n=t>0?"-":"+";return n+K(Math.abs(t)/60,2)}return xe(t,e)}function xe(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),a=K(Math.floor(i/60),2),o=K(i%60,2);return r+a+n+o}const Oa=Ma;var Jn=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Rr=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Pa=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return Jn(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Jn(i,n)).replace("{{time}}",Rr(a,n))},Ra={p:Rr,P:Pa};const Ia=Ra;var Ka=["D","DD"],Ba=["YY","YYYY"];function Fa(t){return Ka.indexOf(t)!==-1}function La(t){return Ba.indexOf(t)!==-1}function Zn(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Wa={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ua=function(e,n,r){var i,a=Wa[e];return typeof a=="string"?i=a:n===1?i=a.one:i=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const Na=Ua;function jt(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var Ya={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$a={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},za={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ha={date:jt({formats:Ya,defaultWidth:"full"}),time:jt({formats:$a,defaultWidth:"full"}),dateTime:jt({formats:za,defaultWidth:"full"})};const ja=Ha;var qa={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Va=function(e,n,r,i){return qa[e]};const Qa=Va;function Ye(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{var u=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[u]}var l=t.argumentCallback?t.argumentCallback(e):e;return i[l]}}var Xa={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ga={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ja={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Za={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},to={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},no=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ro={ordinalNumber:no,era:Ye({values:Xa,defaultWidth:"wide"}),quarter:Ye({values:Ga,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ye({values:Ja,defaultWidth:"wide"}),day:Ye({values:Za,defaultWidth:"wide"}),dayPeriod:Ye({values:eo,defaultWidth:"wide",formattingValues:to,defaultFormattingWidth:"wide"})};const io=ro;function $e(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;var o=a[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],s=Array.isArray(u)?oo(u,function(c){return c.test(o)}):ao(u,function(c){return c.test(o)}),l;l=t.valueCallback?t.valueCallback(s):s,l=n.valueCallback?n.valueCallback(l):l;var f=e.slice(o.length);return{value:l,rest:f}}}function ao(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function oo(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function uo(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],a=e.match(t.parsePattern);if(!a)return null;var o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;var u=e.slice(i.length);return{value:o,rest:u}}}var so=/^(\d+)(th|st|nd|rd)?/i,lo=/\d+/i,co={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fo={any:[/^b/i,/^(a|c)/i]},ho={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vo={any:[/1/i,/2/i,/3/i,/4/i]},po={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mo={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yo={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},go={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bo={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_o={ordinalNumber:uo({matchPattern:so,parsePattern:lo,valueCallback:function(e){return parseInt(e,10)}}),era:$e({matchPatterns:co,defaultMatchWidth:"wide",parsePatterns:fo,defaultParseWidth:"any"}),quarter:$e({matchPatterns:ho,defaultMatchWidth:"wide",parsePatterns:vo,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:$e({matchPatterns:po,defaultMatchWidth:"wide",parsePatterns:mo,defaultParseWidth:"any"}),day:$e({matchPatterns:yo,defaultMatchWidth:"wide",parsePatterns:go,defaultParseWidth:"any"}),dayPeriod:$e({matchPatterns:bo,defaultMatchWidth:"any",parsePatterns:wo,defaultParseWidth:"any"})};const xo=_o;var To={code:"en-US",formatDistance:Na,formatLong:ja,formatRelative:Qa,localize:io,match:xo,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Eo=To;var Co=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,So=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ao=/^'([^]*?)'?$/,ko=/''/g,Do=/[a-zA-Z]/;function Ir(t,e,n){var r,i,a,o,u,s,l,f,c,d,y,h,v,m,w,x,g,b;Q(2,arguments);var p=String(e),_=Lt(),C=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:_.locale)!==null&&r!==void 0?r:Eo,T=De((a=(o=(u=(s=n==null?void 0:n.firstWeekContainsDate)!==null&&s!==void 0?s:n==null||(l=n.locale)===null||l===void 0||(f=l.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&u!==void 0?u:_.firstWeekContainsDate)!==null&&o!==void 0?o:(c=_.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=De((y=(h=(v=(m=n==null?void 0:n.weekStartsOn)!==null&&m!==void 0?m:n==null||(w=n.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&v!==void 0?v:_.weekStartsOn)!==null&&h!==void 0?h:(g=_.locale)===null||g===void 0||(b=g.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var M=ae(t);if(!ba(M))throw new RangeError("Invalid time value");var R=ya(M),I=wa(M,R),P={firstWeekContainsDate:T,weekStartsOn:k,locale:C,_originalDate:M},Y=p.match(So).map(function(S){var W=S[0];if(W==="p"||W==="P"){var z=Ia[W];return z(S,C.formatLong)}return S}).join("").match(Co).map(function(S){if(S==="''")return"'";var W=S[0];if(W==="'")return Mo(S);var z=Oa[W];if(z)return!(n!=null&&n.useAdditionalWeekYearTokens)&&La(S)&&Zn(S,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Fa(S)&&Zn(S,e,String(t)),z(I,S,C.localize,P);if(W.match(Do))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");return S}).join("");return Y}function Mo(t){var e=t.match(Ao);return e?e[1].replace(ko,"'"):t}class Oo extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`
      <style>
        :host {
          align-items: center;
          background-color: var( --primary-color );
          box-sizing: border-box;
          display: flex;
          flex-direction: column;
          position: relative;
          width: 100%;
        }

        :host( [concealed] ) {
          visibility: hidden;
        }

        :host( [hidden] ) {
          display: none;
        }

        div[part=calendar] {
          box-sizing: border-box;
          display: grid;
          grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
          grid-template-rows: repeat( auto-fill, 1fr );
          gap: 0 4px;          
        }

        div[part=calendar] button {
          background: none;
          border: none;
          border-radius: 36px;
          box-sizing: border-box;
          color: #ffffff;
          font-family: 'Roboto', sans-serif;
          font-size: 14px;
          font-style: 400;
          height: 36px;
          margin: 2px;
          padding: 0;
          text-align: center;
          text-rendering: optimizeLegibility;
          width: 36px;
          -webkit-tap-highlight-color: transparent;
        }

        div[part=calendar] button.outside {        
          opacity: 0.30;
        }

        div[part=calendar] button.today {        
          background-color: #ffffff;
          color: var( --primary-color );
        }        

        div[part=days] {
          border-bottom: solid 1px #ffffff99;
          display: flex;
          flex-direction: row;
          gap: 4px;
        }

        div[part=days] p {
          color: #ffffff;
          font-family: 'Roboto', sans-serif;
          font-size: 14px;
          font-weight: 400;
          line-height: 40px;
          margin: 0;
          opacity: 0.60;
          padding: 0;
          text-align: center;
          text-rendering: optimizeLegibility;          
          width: 40px;
        } 

        div[part=month] {
          box-sizing: border-box;
          display: flex;
          flex-direction: column;
          height: 40px;
          justify-content: center;
          margin: 16px 0 0 0;
          width: 304px;
        }

        div[part=month] p {
          color: #ffffff;
          font-family: 'Roboto', sans-serif;
          font-size: 20px;
          font-weight: 400;
          margin: 0;
          padding: 0;
          text-rendering: optimizeLegibility;
        }        
      </style>
      <div part="month">
        <p></p>
      </div>
      <div part="days">
        <p>Sun</p>
        <p>Mon</p>
        <p>Tue</p>
        <p>Wed</p>
        <p>Thu</p>
        <p>Fri</p>
        <p>Sat</p>
      </div>
      <div part="calendar"></div>
    `,this._data=null,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.$calendar=this.shadowRoot.querySelector("div[part=calendar]"),this.$month=this.shadowRoot.querySelector("div[part=month] p")}_render(){for(;this.$calendar.children.length<42;){const r=document.createElement("button");this.$calendar.appendChild(r)}const e=new Date;this.$month.innerText=Ir(e,"MMMM");const n=new Date(e.getFullYear(),e.getMonth(),1);n.setDate(n.getDate()-n.getDay());for(let r=0;r<42;r++)this.$calendar.children[r].innerText=n.getDate(),this.$calendar.children[r].setAttribute("data-year",n.getFullYear()),this.$calendar.children[r].setAttribute("data-month",n.getMonth()),this.$calendar.children[r].setAttribute("data-date",n.getDate()),n.getMonth()===e.getMonth()?this.$calendar.children[r].classList.remove("outside"):this.$calendar.children[r].classList.add("outside"),n.getMonth()===e.getMonth()&&n.getDate()===e.getDate()?this.$calendar.children[r].classList.add("today"):this.$calendar.children[r].classList.remove("today"),n.setDate(n.getDate()+1)}_upgrade(e){if(this.hasOwnProperty(e)){const n=this[e];delete this[e],this[e]=n}}connectedCallback(){this._upgrade("concealed"),this._upgrade("data"),this._upgrade("hidden"),this._upgrade("value"),this._render()}static get observedAttributes(){return["concealed","hidden"]}attributeChangedCallback(e,n,r){this._render()}get data(){return this._data}set data(e){this._data=e}get value(){return this._selected}set value(e){this._displayed=e===null?null:new Date(e.getTime()),this._selected=e===null?null:new Date(e.getTime()),this._render()}get concealed(){return this.hasAttribute("concealed")}set concealed(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("concealed"):this.setAttribute("concealed","")):this.removeAttribute("concealed")}get hidden(){return this.hasAttribute("hidden")}set hidden(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("hidden"):this.setAttribute("hidden","")):this.removeAttribute("hidden")}}window.customElements.define("mw-calendar",Oo);class Po extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`
      <style>
        :host {
          box-sizing: border-box;
          display: block;
          position: relative;
        }

        :host( [concealed] ) {
          visibility: hidden;
        }

        :host( [hidden] ) {
          display: none;
        }

        p {
          color: var( --icon-color, #222222 );
          direction: ltr;          
          display: inline-block;          
          font-family: 'Material Symbols Outlined';
          font-size: var( --icon-font-size, 14px );          
          font-style: normal; 
          font-weight: normal;
          letter-spacing: normal;          
          margin: 0;
          padding: 0;          
          text-align: var( --icon-text-align, center );          
          text-rendering: optimizeLegibility;          
          text-transform: none;
          white-space: nowrap;          
          width: var( --icon-width, 40px );          
          word-wrap: normal;                    
        }
      </style>
      <p>
        <slot></slot>
      </p>
    `,this._data=null,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.$icon=this.shadowRoot.querySelector("p")}_render(){const e=[];this.fill!==null&&e.push(`'FILL' ${this.fill}`),this.weight!==null&&e.push(`'wght' ${this.weight}`),this.$icon.style.fontVariationSettings=e.join(",")}_upgrade(e){if(this.hasOwnProperty(e)){const n=this[e];delete this[e],this[e]=n}}connectedCallback(){this._upgrade("concealed"),this._upgrade("data"),this._upgrade("fill"),this._upgrade("hidden"),this._upgrade("weight"),this._render()}static get observedAttributes(){return["concealed","hidden","fill","weight"]}attributeChangedCallback(e,n,r){this._render()}get data(){return this._data}set data(e){this._data=e}get concealed(){return this.hasAttribute("concealed")}set concealed(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("concealed"):this.setAttribute("concealed","")):this.removeAttribute("concealed")}get fill(){return this.hasAttribute("fill")?parseInt(this.getAttribute("fill")):null}set fill(e){e!==null?this.setAttribute("fill",e):this.removeAttribute("fill")}get hidden(){return this.hasAttribute("hidden")}set hidden(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("hidden"):this.setAttribute("hidden","")):this.removeAttribute("hidden")}get weight(){return this.hasAttribute("weight")?parseInt(this.getAttribute("weight")):null}set weight(e){e!==null?this.setAttribute("weight",e):this.removeAttribute("weight")}}window.customElements.define("mw-icon",Po);class Ro extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`
      <style>
        :host {
          align-items: center;
          box-sizing: border-box;
          display: flex;
          flex-direction: row;
          height: 40px;
          position: relative;
        }

        :host( [concealed] ) {
          visibility: hidden;
        }

        :host( [hidden] ) {
          display: none;
        }

        mw-icon {
          --icon-font-size: 10px;
        }

        p {
          box-sizing: border-box;
          color: #222222;
          font-family: 'Roboto', sans-serif;
          font-size: 14px;
          font-weight: 400;
          margin: 0;
          padding: 0 16px 0 16px;
          text-rendering: optimizeLegibility;          
        }

        p[part=date] {
          flex-basis: 0;
          flex-grow: 1;
          padding: 0 16px 0 0;
        }        

        p[part=variation] {        
          width: 130px;
        }        
      </style>
      <mw-icon weight="400">circle</mw-icon>
      <p part="date"></p>
      <p part="variation">-</p>
    `,this._data=null,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.$circle=this.shadowRoot.querySelector("mw-icon"),this.$date=this.shadowRoot.querySelector("p[part=date]"),this.$variation=this.shadowRoot.querySelector("p[part=variation]")}_render(){this._data!==null&&(this.$date.innerText=Ir(this._data.createdAt,"EEE, MMM d @ h:mm aa"),this.$variation.innerText=this._data.variation===null?"-":this._data.variation)}_upgrade(e){if(this.hasOwnProperty(e)){const n=this[e];delete this[e],this[e]=n}}connectedCallback(){this._upgrade("concealed"),this._upgrade("data"),this._upgrade("hidden"),this._render()}static get observedAttributes(){return["concealed","hidden"]}attributeChangedCallback(e,n,r){this._render()}get data(){return this._data}set data(e){this._data=e,this._render()}get concealed(){return this.hasAttribute("concealed")}set concealed(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("concealed"):this.setAttribute("concealed","")):this.removeAttribute("concealed")}get hidden(){return this.hasAttribute("hidden")}set hidden(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("hidden"):this.setAttribute("hidden","")):this.removeAttribute("hidden")}}window.customElements.define("mw-item-renderer",Ro);class Io extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`
      <style>
        :host {
          box-sizing: border-box;
          display: flex;
          flex-direction: column;
          position: relative;
        }

        :host( [concealed] ) {
          visibility: hidden;
        }

        :host( [hidden] ) {
          display: none;
        }

        div {
          background-color: var( --secondary-color );
          box-sizing: border-box;
          display: flex;
          flex-direction: row;
        }

        div button {
          align-items: center;
          background: none;
          border: none;
          display: flex;
          flex-direction: row;
          height: 40px;
          margin: 0;
          padding: 0 16px 0 16px;
        }

        div button:first-of-type {
          flex-basis: 0;
          flex-grow: 1;
          margin: 0 0 0 24px;
        }

        div button:last-of-type {
          width: 130px;
        }        

        div button p {
          color: var( --primary-color );
          flex-basis: 0;
          flex-grow: 1;
          font-family: 'Roboto', sans-serif;
          font-size: 14px;
          font-weight: 500;
          margin: 0;
          padding: 0;
          text-align: left;
          text-rendering: optimizeLegibility;                    
        }

        mw-icon {
          --icon-color: var( --primary-color );
        }

        mw-item-renderer {
          border-bottom: solid 1px var( --secondary-color );
        }

        mw-item-renderer:first-of-type::part( circle ) {
          font-variation-settings: 'FILL' 0;
        }

        ul {
          margin: 0;
          padding: 0;
        }
      </style>
      <div>
        <button data-index="0">
          <p>Date Taken</p>
          <mw-icon>south</mw-icon>
        </button>
        <button data-index="1">
          <p>Variation</p>
          <mw-icon concealed>south</mw-icon>
        </button>
      </div>
      <ul></ul>
    `,this._data=null,this._provider=[],this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.$list=this.shadowRoot.querySelector("ul")}_render(){for(;this.$list.children.length>this._provider.length;)this.$list.children[0].remove();for(;this.$list.children.length<this._provider.length;){const e=document.createElement("mw-item-renderer");this.$list.appendChild(e)}for(let e=0;e<this._provider.length;e++)this.$list.children[e].data=this._provider[e]}_upgrade(e){if(this.hasOwnProperty(e)){const n=this[e];delete this[e],this[e]=n}}connectedCallback(){this._upgrade("concealed"),this._upgrade("data"),this._upgrade("hidden"),this._upgrade("provider"),this._render()}static get observedAttributes(){return["concealed","hidden"]}attributeChangedCallback(e,n,r){this._render()}get data(){return this._data}set data(e){this._data=e}get provider(){return this._provider}set provider(e){this._provider=e===null?[]:[...e],this._render()}get concealed(){return this.hasAttribute("concealed")}set concealed(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("concealed"):this.setAttribute("concealed","")):this.removeAttribute("concealed")}get hidden(){return this.hasAttribute("hidden")}set hidden(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("hidden"):this.setAttribute("hidden","")):this.removeAttribute("hidden")}}window.customElements.define("mw-history",Io);class Ko extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`
      <style>
        :host {
          box-sizing: border-box;
          display: flex;
          flex-direction: row;
          position: relative;
        }

        :host( [concealed] ) {
          visibility: hidden;
        }

        :host( [hidden] ) {
          display: none;
        }

        ::slotted( button ) {
          background: none;
          border: none;
          border: solid 1px transparent;
          border-color: var( --primary-color );
          box-sizing: border-box;   
          color: var( --primary-color );
          font-family: 'Roboto', sans-serif;
          font-size: 14px;
          font-weight: 500;
          height: 40px;
          margin: 0;
          padding: 0 24px 0 24px;
          text-rendering: optimizeLegibility;
          -webkit-tap-highlight-color: transparent;
        }

        ::slotted( button:first-of-type ) {
          border-top-left-radius: 40px;
          border-bottom-left-radius: 40px;          
          border-right: none;
        }

        ::slotted( button:last-of-type ) {
          border-top-right-radius: 40px;
          border-bottom-right-radius: 40px;          
          border-left: none;
        }        

        ::slotted( button.selected ) {
          background-color: var( --primary-color );
          color: var( --secondary-color );
        }
      </style>
      <slot></slot>
    `,this._data=null,this.doButtonClick=this.doButtonClick.bind(this),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.$calendar=this.shadowRoot.querySelector("div[part=calendar]"),this.$month=this.shadowRoot.querySelector("div[part=month] p"),this.$slot=this.shadowRoot.querySelector("slot"),this.$slot.addEventListener("slotchange",()=>{for(let n=0;n<this.children.length;n++)this.children[n].removeEventListener("click",this.doButtonClick),this.children[n].addEventListener("click",this.doButtonClick),this.children[n].setAttribute("data-index",n)})}doButtonClick(e){const n=parseInt(e.currentTarget.getAttribute("data-index"));n!==this.selectedIndex&&(this.selectedIndex=n,this.dispatchEvent(new CustomEvent("change",{detail:{selectedIndex:this.selectedIndex}})))}_render(){const e=this.selectedIndex===null?0:this.selectedIndex;for(let n=0;n<this.children.length;n++)n===e?this.children[n].classList.add("selected"):this.children[n].classList.remove("selected")}_upgrade(e){if(this.hasOwnProperty(e)){const n=this[e];delete this[e],this[e]=n}}connectedCallback(){this._upgrade("concealed"),this._upgrade("data"),this._upgrade("hidden"),this._upgrade("selectedIndex"),this._render()}static get observedAttributes(){return["concealed","hidden","selected-index"]}attributeChangedCallback(e,n,r){this._render()}get data(){return this._data}set data(e){this._data=e}get concealed(){return this.hasAttribute("concealed")}set concealed(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("concealed"):this.setAttribute("concealed","")):this.removeAttribute("concealed")}get hidden(){return this.hasAttribute("hidden")}set hidden(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("hidden"):this.setAttribute("hidden","")):this.removeAttribute("hidden")}get selectedIndex(){return this.hasAttribute("selected-index")?parseInt(this.getAttribute("selected-index")):null}set selectedIndex(e){e!==null?this.setAttribute("selected-index",e):this.removeAttribute("selected-index")}}window.customElements.define("mw-toggle",Ko);class Bo extends HTMLElement{constructor(){super();const e=document.createElement("template");e.innerHTML=`
      <style>
        :host {
          box-sizing: border-box;
          display: flex;
          flex-direction: column;
          position: relative;
        }

        :host( [concealed] ) {
          visibility: hidden;
        }

        :host( [hidden] ) {
          display: none;
        }
    
        div {
          align-items: center;
          background-color: #efe5fd;
          display: flex;
          flex-direction: column;
          padding: 24px;
        }
  
        div p {
          color: var( --primary-color );
          font-family: 'Roboto', sans-serif;
          font-size: 16px;
          font-weight: 400;
          margin: 0 0 24px 0;
          padding: 0;
          text-rendering: optimizeLegibility;
        }

        med-toggle button {
          min-width: 75px;
        }        

        svg {
          background-color: var( --secondary-color );
        }

        svg path {
          fill: var( --primary-color );
        }
      </style>
      <mw-calendar></mw-calendar>
      <svg
        viewBox="0 0 100 10"
        xmlns="http://www.w3.org/2000/svg">
        <path d="M 50, 10 A 50, 10 0 0 1 0, 0 H 100 A 50, 10 0 0 1 50, 10 Z" />
      </svg>
      <div>
        <p>Did you take your medication?</p>
        <mw-toggle>
          <button>Yes</button>
          <button>No</button>      
        </mw-toggle>
      </div>  
      <mw-history></mw-history>
    `,this._data=null,this._db=null,this._id=null,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.$history=this.shadowRoot.querySelector("mw-history"),this.$toggle=this.shadowRoot.querySelector("mw-toggle"),this.$toggle.addEventListener("change",n=>this.doToggleChange(n)),this._db=new In("Quinn"),this._db.version(1).stores({Medicine:"id, createdAt"}),this._db.Medicine.orderBy("createdAt").reverse().toArray().then(n=>{if(n.length===0)this.$toggle.selectedIndex=1;else{this._summarize(n),console.log(n),this.$history.provider=n;const r=new Date(n[0].createdAt),i=new Date;i.getDate()===r.getDate()&&i.getMonth()===r.getMonth()&&i.getFullYear()===r.getFullYear()?(this._id=n[0].id,this.$toggle.selectedIndex=0):(this._id=null,this.$toggle.selectedIndex=1)}}),"serviceWorker"in navigator&&navigator.serviceWorker.register("worker.js")}_summarize(e){for(let n=0;n<e.length-1;n++)e[n].variation=e[n].createdAt-e[n+1].createdAt;return e[e.length-1].variation=null,e}doToggleChange(e){e.detail.selectedIndex===0?(this._id=Ur(),this._db.Medicine.add({id:this._id,createdAt:Date.now()}).then(()=>this._db.Medicine.orderBy("createdAt").reverse().toArray()).then(n=>{this._summarize(n),this.$history.provider=n})):this._db.Medicine.delete(this._id).then(()=>{this._id=null}).then(()=>this._db.Medicine.orderBy("createdAt").reverse().toArray()).then(n=>{this._summarize(n),this.$history.provider=n})}_render(){}_upgrade(e){if(this.hasOwnProperty(e)){const n=this[e];delete this[e],this[e]=n}}connectedCallback(){this._upgrade("concealed"),this._upgrade("data"),this._upgrade("hidden"),this._render()}static get observedAttributes(){return["concealed","hidden"]}attributeChangedCallback(e,n,r){this._render()}get data(){return this._data}set data(e){this._data=e}get concealed(){return this.hasAttribute("concealed")}set concealed(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("concealed"):this.setAttribute("concealed","")):this.removeAttribute("concealed")}get hidden(){return this.hasAttribute("hidden")}set hidden(e){e!==null?(typeof e=="boolean"&&(e=e.toString()),e==="false"?this.removeAttribute("hidden"):this.setAttribute("hidden","")):this.removeAttribute("hidden")}}window.customElements.define("mw-quinn",Bo);
